# Cowork Creative Studio å‘å±•ä¸è¿­ä»£è®¡åˆ’

**ç‰ˆæœ¬**: 1.1  
**åˆ›å»ºæ—¥æœŸ**: 2026-02-02  
**æœ€åæ›´æ–°**: 2026-02-02  
**ç›®æ ‡å®šä½**: é¢å‘ä¸­å°å‹åº”ç”¨å’Œç³»ç»Ÿçš„åˆ›æ„ç”Ÿäº§åŠ›å·¥å…·ï¼Œæä¾›å…¨æµç¨‹å…¨è§’è‰²Agenté©±åŠ¨çš„åº”ç”¨åˆ›ä½œä¸è¿­ä»£èƒ½åŠ›

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

Cowork Creative Studio æ˜¯ä¸€æ¬¾åŸºäº AI æ™ºèƒ½ä½“çš„åˆ›æ„ç”Ÿäº§åŠ›å·¥å…·ï¼Œå½“å‰å·²å®ŒæˆåŸºç¡€æ¶æ„æ­å»ºå’Œæ ¸å¿ƒåŠŸèƒ½å®ç°ã€‚æœ¬è®¡åˆ’æ—¨åœ¨å°†å…¶æ‰“é€ æˆä¸ºé¢å‘ä¸­å°å‹åº”ç”¨å’Œç³»ç»Ÿçš„ä¸“ä¸šåˆ›ä½œå¹³å°ï¼Œåœ¨äº§å“äº¤äº’å±‚é¢è¿›è¡Œç³»ç»Ÿæ€§å‡çº§ï¼Œæä¾›æ›´æµç•…ã€æ›´ä¸“ä¸šã€æ›´é«˜æ•ˆçš„ç”¨æˆ·ä½“éªŒã€‚

### æ ¸å¿ƒç›®æ ‡

1. **æå‡äº§å“äº¤äº’ä½“éªŒ**ï¼šä¼˜åŒ– UI/UXï¼Œé™ä½å­¦ä¹ æˆæœ¬ï¼Œæé«˜æ“ä½œæ•ˆç‡
2. **å¢å¼ºåˆ›ä½œæµç¨‹å¯è§†åŒ–**ï¼šè®©ç”¨æˆ·æ¸…æ™°äº†è§£ AI æ™ºèƒ½ä½“çš„å·¥ä½œè¿‡ç¨‹å’Œå†³ç­–ä¾æ®
3. **å¼ºåŒ–å®æ—¶åä½œèƒ½åŠ›**ï¼šæä¾›æ›´æµç•…çš„äººæœºäº¤äº’ç•Œé¢å’Œå®æ—¶åé¦ˆæœºåˆ¶
4. **æ„å»ºä¸“ä¸šåˆ›ä½œç¯å¢ƒ**ï¼šæä¾›ç±»ä¼¼ä¸“ä¸š IDE çš„å¼€å‘ä½“éªŒ
5. **æ”¯æŒå¤šé¡¹ç›®å¹¶è¡Œç®¡ç†**ï¼šæ»¡è¶³å¤šé¡¹ç›®ã€å¤šåœºæ™¯çš„å¼€å‘éœ€æ±‚
6. **é™ä½è¿­ä»£æˆæœ¬**ï¼šé€šè¿‡æ™ºèƒ½è°ƒåº¦ Agentï¼Œç®€åŒ– New/Modify æµç¨‹ï¼Œæ”¯æŒé¡¹ç›®å®Œæˆåç»§ç»­äº¤äº’

### å½“å‰çŠ¶æ€è¯„ä¼°

| ç»´åº¦ | å®Œæˆåº¦ | è¯„çº§ | è¯´æ˜ |
|------|--------|------|------|
| **æ ¸å¿ƒåŠŸèƒ½** | 85% | âœ… è‰¯å¥½ | åŸºç¡€åŠŸèƒ½å·²å®ç°ï¼Œå·¥ä½œæµå®Œæ•´ |
| **UI/UX è®¾è®¡** | 60% | âš ï¸ éœ€æ”¹è¿› | åŠŸèƒ½å¯ç”¨ä½†ä½“éªŒä¸ä¸“ä¸š |
| **å®æ—¶åé¦ˆ** | 70% | âš ï¸ éœ€ä¼˜åŒ– | äº‹ä»¶æµå®ç°ä½†éƒ¨åˆ†åŠŸèƒ½ä¸å®Œå–„ |
| **ä»£ç ç¼–è¾‘** | 85% | âœ… è‰¯å¥½ | Monaco Editor é›†æˆå®Œå–„ |
| **é¢„è§ˆèƒ½åŠ›** | 90% | âœ… ä¼˜ç§€ | é¢„è§ˆæœåŠ¡å™¨åŠŸèƒ½å®Œæ•´ |
| **é¡¹ç›®ç®¡ç†** | 40% | âš ï¸ éœ€é‡æ„ | ä»…æ”¯æŒå•é¡¹ç›®ï¼Œç¼ºå°‘é¡¶å±‚é¡¹ç›®ç®¡ç† |
| **è¿­ä»£æµç¨‹** | 50% | âš ï¸ éœ€ä¼˜åŒ– | New/Modify ä½¿ç”¨æˆæœ¬é«˜ï¼Œç¼ºå°‘æ™ºèƒ½è°ƒåº¦ |
| **é”™è¯¯å¤„ç†** | 60% | âš ï¸ éœ€æ”¹è¿› | é”™è¯¯æç¤ºä¸å‹å¥½ |
| **æ€§èƒ½ä¼˜åŒ–** | 65% | âš ï¸ éœ€ä¼˜åŒ– | å¤§é¡¹ç›®æ€§èƒ½æœ‰é—®é¢˜ |

**ç»¼åˆè¯„åˆ†**: 68/100 (è‰¯å¥½ä½†æœ‰æ˜æ˜¾æ”¹è¿›ç©ºé—´)

### æ ¸å¿ƒé—®é¢˜è¯†åˆ«

**é—®é¢˜1ï¼šç¼ºå°‘é¡¶å±‚é¡¹ç›®ç®¡ç†**
- å½“å‰åªèƒ½è¯»å–å¯åŠ¨è·¯å¾„ä¸‹çš„ `.cowork` ç›®å½•
- æ— æ³•è·¨ç›®å½•ç®¡ç†å¤šä¸ªé¡¹ç›®
- ç¼ºå°‘é¡¹ç›®åˆ—è¡¨ã€æ‰“å¼€ã€åˆ é™¤ç­‰åŸºç¡€æ“ä½œ
- ç”¨æˆ·éœ€è¦åœ¨ä¸åŒçš„å·¥ä½œç›®å½•é—´åˆ‡æ¢ï¼Œä½“éªŒä¸æµç•…

**é—®é¢˜2ï¼šè¿­ä»£æµç¨‹ä½¿ç”¨æˆæœ¬é«˜**
- New åˆ›å»ºçš„é¡¹ç›®åœ¨ Completed åæ— æ³•ç»§ç»­èŠå¤©äº¤äº’
- éœ€è¦æ‰‹åŠ¨é€‰æ‹© Resume/Modify æ“ä½œï¼Œå­¦ä¹ æˆæœ¬é«˜
- ç¼ºå°‘æ™ºèƒ½ Agent æ¥è‡ªåŠ¨è°ƒåº¦ä¿®æ”¹æ¨¡å¼
- é¡¹ç›®å®Œæˆåç»§ç»­å¼€å‘çš„æµç¨‹ä¸å¤Ÿè‡ªç„¶

**å½±å“èŒƒå›´**:
- ç”¨æˆ·ä½“éªŒï¼šéœ€è¦é¢‘ç¹åˆ‡æ¢ç›®å½•ï¼Œæ“ä½œç¹ç
- å­¦ä¹ æ›²çº¿ï¼šNew/Modify æµç¨‹ä¸ç›´è§‚ï¼Œæ–°ç”¨æˆ·éš¾ä»¥ç†è§£
- å¼€å‘æ•ˆç‡ï¼šæ— æ³•å¿«é€Ÿç»§ç»­å¼€å‘å·²å®Œæˆçš„é¡¹ç›®

---

## ğŸ¯ äº§å“å®šä½ä¸ç”¨æˆ·ç”»åƒ

### äº§å“å®šä½

**Cowork Creative Studio** æ˜¯ä¸€æ¬¾é¢å‘ä¸­å°å‹åº”ç”¨å’Œç³»ç»Ÿçš„åˆ›æ„ç”Ÿäº§åŠ›å·¥å…·ï¼Œé€šè¿‡ AI æ™ºèƒ½ä½“åä½œï¼Œä¸ºç”¨æˆ·æä¾›å…¨æµç¨‹ã€å…¨è§’è‰²çš„åº”ç”¨åˆ›ä½œä¸è¿­ä»£èƒ½åŠ›ã€‚

**æ ¸å¿ƒä»·å€¼ä¸»å¼ **ï¼š
- ğŸ¨ **ä»åˆ›æ„åˆ°äº¤ä»˜**ï¼šä¸€ç«™å¼å®Œæˆä»æƒ³æ³•åˆ°å¯è¿è¡Œåº”ç”¨çš„å®Œæ•´åˆ›ä½œæµç¨‹
- ğŸ¤– **AI é©±åŠ¨çš„åä½œå›¢é˜Ÿ**ï¼šå†…ç½® 8 ä¸ªä¸“ä¸š AI è§’è‰²ï¼Œæ¨¡æ‹ŸçœŸå®å¼€å‘å›¢é˜Ÿåä½œ
- âš¡ **å¿«é€Ÿè¿­ä»£**ï¼šæ”¯æŒå¢é‡ä¿®æ”¹ã€ç‰ˆæœ¬å›é€€ï¼Œçµæ´»åº”å¯¹éœ€æ±‚å˜åŒ–
- ğŸ”’ **å®‰å…¨å¯æ§**ï¼šäººæœºåä½œéªŒè¯ï¼Œç¡®ä¿è¾“å‡ºè´¨é‡å’Œæ–¹å‘æ­£ç¡®
- ğŸ“ **å¤šé¡¹ç›®ç®¡ç†**ï¼šç»Ÿä¸€ç®¡ç†æ‰€æœ‰é¡¹ç›®ï¼Œå¿«é€Ÿåˆ‡æ¢ï¼Œæ— éœ€åˆ‡æ¢ç›®å½•
- ğŸ”„ **æ™ºèƒ½è¿­ä»£**ï¼šé¡¹ç›®å®Œæˆåç»§ç»­äº¤äº’ï¼Œè‡ªåŠ¨è°ƒåº¦ä¿®æ”¹æ¨¡å¼

### ç›®æ ‡ç”¨æˆ·

#### 1. ç‹¬ç«‹å¼€å‘è€… / åˆ›ä¸šè€…
**ç‰¹å¾**ï¼š
- éœ€è¦å¿«é€Ÿå°†åˆ›æ„è½¬åŒ–ä¸ºå¯éªŒè¯çš„åŸå‹
- æ—¶é—´ç´§è¿«ï¼Œè¿½æ±‚å¼€å‘æ•ˆç‡
- éœ€è¦å®Œæ•´çš„æŠ€æœ¯æ ˆæ”¯æŒ

**æ ¸å¿ƒè¯‰æ±‚**ï¼š
- é¿å…ä»é›¶å¼€å§‹çš„æ¶æ„è®¾è®¡è´Ÿæ‹…
- å¿«é€Ÿç”Ÿæˆå¯è¿è¡Œçš„åˆå§‹ä»£ç 
- æ”¯æŒå¿«é€Ÿè¿­ä»£å’ŒåŠŸèƒ½å¢å¼º

**ä½¿ç”¨åœºæ™¯**ï¼š
- æ„å»ºä¸ªäººé¡¹ç›®åŸå‹
- éªŒè¯å•†ä¸šæ¨¡å¼
- å¿«é€Ÿå‘å¸ƒ MVP

#### 2. æŠ€æœ¯åˆ›ä¸šè€… / å°å›¢é˜Ÿ
**ç‰¹å¾**ï¼š
- éœ€è¦ç®¡ç†å¤šä¸ªé¡¹ç›®
- è¿½æ±‚å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡
- éœ€è¦å›¢é˜Ÿåä½œèƒ½åŠ›

**æ ¸å¿ƒè¯‰æ±‚**ï¼š
- å¤šé¡¹ç›®å¹¶è¡Œç®¡ç†
- ç»Ÿä¸€çš„å¼€å‘å·¥ä½œæµ
- å¯è¿½æº¯çš„å˜æ›´å†å²

**ä½¿ç”¨åœºæ™¯**ï¼š
- äº§å“å¿«é€Ÿè¿­ä»£
- åŠŸèƒ½å¢å¼ºå¼€å‘
- æŠ€æœ¯å€ºåŠ¡ç®¡ç†

#### 3. äº§å“ç»ç† / è®¾è®¡å¸ˆ
**ç‰¹å¾**ï¼š
- éœ€è¦å¿«é€ŸéªŒè¯äº§å“æƒ³æ³•
- å…³æ³¨ç”¨æˆ·ä½“éªŒå’ŒåŠŸèƒ½å®Œæ•´æ€§
- éœ€è¦ä¸å¼€å‘å›¢é˜Ÿåä½œ

**æ ¸å¿ƒè¯‰æ±‚**ï¼š
- å¯è§†åŒ–éœ€æ±‚æ–‡æ¡£
- å¿«é€ŸæŸ¥çœ‹å®ç°æ•ˆæœ
- æ˜“äºç†è§£çš„å¼€å‘è¿›åº¦

**ä½¿ç”¨åœºæ™¯**ï¼š
- äº§å“åŸå‹éªŒè¯
- éœ€æ±‚æ–‡æ¡£ç®¡ç†
- åŠŸèƒ½æ¼”ç¤º

---

## ğŸ“Š å½“å‰æ¶æ„ä¸åŠŸèƒ½åˆ†æ

### ç°æœ‰æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Cowork Creative Studio                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   å‰ç«¯å±‚ (React) â”‚     â”‚  åç«¯å±‚ (Rust)  â”‚                   â”‚
â”‚  â”‚  - App.jsx      â”‚â”€â”€â”€â”€â–¶â”‚  - lib.rs       â”‚                   â”‚
â”‚  â”‚  - ç»„ä»¶ç³»ç»Ÿ     â”‚     â”‚  - gui_commands â”‚                   â”‚
â”‚  â”‚  - Ant Design   â”‚     â”‚  - preview_serverâ”‚                  â”‚
â”‚  â”‚  - Monaco       â”‚     â”‚  - project_runnerâ”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚           â”‚                       â”‚                            â”‚
â”‚           â–¼                       â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  äº‹ä»¶é€šä¿¡       â”‚â”€â”€â”€â”€â–¶â”‚  cowork-core    â”‚                   â”‚
â”‚  â”‚  - agent_event  â”‚     â”‚  - pipeline     â”‚                   â”‚
â”‚  â”‚  - hitl_request â”‚     â”‚  - agents       â”‚                   â”‚
â”‚  â”‚  - session_stateâ”‚     â”‚  - storage      â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å·²å®ç°åŠŸèƒ½æ¸…å•

| åŠŸèƒ½æ¨¡å— | å­åŠŸèƒ½ | çŠ¶æ€ | å®Œæˆåº¦ |
|---------|--------|------|--------|
| **ä¼šè¯ç®¡ç†** | åˆ›å»ºé¡¹ç›® | âœ… | 100% |
| | æ¢å¤ä¼šè¯ | âœ… | 100% |
| | ä¿®æ”¹é¡¹ç›® | âœ… | 100% |
| | å›é€€ç‰ˆæœ¬ | âœ… | 100% |
| | ä¼šè¯åˆ—è¡¨ | âœ… | 100% |
| **å·¥ä»¶æŸ¥çœ‹** | Idea æŸ¥çœ‹ | âœ… | 100% |
| | PRD æŸ¥çœ‹ | âœ… | 100% |
| | Features æŸ¥çœ‹ | âœ… | 100% |
| | Design æŸ¥çœ‹ | âœ… | 100% |
| | Plan æŸ¥çœ‹ | âœ… | 100% |
| | Delivery æŸ¥çœ‹ | âœ… | 100% |
| **ä»£ç ç¼–è¾‘** | æ–‡ä»¶æ ‘å¯¼èˆª | âœ… | 95% |
| | ä»£ç ç¼–è¾‘ | âœ… | 95% |
| | è¯­æ³•é«˜äº® | âœ… | 95% |
| | æ–‡ä»¶ä¿å­˜ | âœ… | 95% |
| | å¤šè¯­è¨€æ”¯æŒ | âœ… | 90% |
| **å®æ—¶é¢„è§ˆ** | å¯åŠ¨é¢„è§ˆ | âœ… | 100% |
| | åœæ­¢é¢„è§ˆ | âœ… | 100% |
| | åˆ·æ–°é¢„è§ˆ | âœ… | 100% |
| | iframe åµŒå…¥ | âœ… | 100% |
| **é¡¹ç›®è¿è¡Œ** | å¯åŠ¨é¡¹ç›® | âœ… | 100% |
| | åœæ­¢é¡¹ç›® | âœ… | 100% |
| | æ—¥å¿—æ˜¾ç¤º | âš ï¸ | 70% |
| | å®æ—¶æ—¥å¿—æµ | âŒ | 0% |
| **HITL äº¤äº’** | è¾“å…¥è¯·æ±‚ | âœ… | 100% |
| | é€‰é¡¹é€‰æ‹© | âœ… | 100% |
| | åé¦ˆæäº¤ | âœ… | 100% |
| **å®æ—¶äº‹ä»¶** | Agent æ€è€ƒ | âœ… | 100% |
| | Agent è¾“å‡º | âœ… | 100% |
| | é˜¶æ®µåˆ‡æ¢ | âœ… | 100% |
| | é”™è¯¯é€šçŸ¥ | âœ… | 100% |

### å¾…å®ç°åŠŸèƒ½æ¸…å•

| åŠŸèƒ½æ¨¡å— | å­åŠŸèƒ½ | ä¼˜å…ˆçº§ | é¢„è®¡å·¥æ—¶ |
|---------|--------|--------|---------|
| **å®æ—¶æ—¥å¿—æµ** | æ—¥å¿—æµå¼æ¨é€ | P0 | 8h |
| | æ—¥å¿—çº§åˆ«ç€è‰² | P1 | 4h |
| | æ—¥å¿—æœç´¢/è¿‡æ»¤ | P1 | 6h |
| **ä»£ç ç¼–è¾‘å¢å¼º** | ä»£ç æ ¼å¼åŒ– | P1 | 6h |
| | æœç´¢/æ›¿æ¢ | P1 | 4h |
| | Git Diff æŸ¥çœ‹ | P2 | 12h |
| | ä»£ç å¯¼èˆª | P2 | 8h |
| **é¢„è§ˆå¢å¼º** | è®¾å¤‡æ¨¡æ‹Ÿ | P2 | 8h |
| | ç½‘ç»œæ§åˆ¶ | P2 | 6h |
| | æ§åˆ¶å°æŸ¥çœ‹ | P2 | 4h |
| **é¡¹ç›®ç®¡ç†** | é¡¹ç›®æ¨¡æ¿ | P1 | 12h |
| | é¡¹ç›®å¯¼å…¥/å¯¼å‡º | P2 | 10h |
| | é¡¹ç›®é…ç½®ç®¡ç† | P2 | 8h |
| **åä½œåŠŸèƒ½** | å¤šç”¨æˆ·åä½œ | P2 | 20h |
| | åˆ†äº«åŠŸèƒ½ | P2 | 8h |
| | è¯„è®ºç³»ç»Ÿ | P2 | 6h |
| **æ€§èƒ½ä¼˜åŒ–** | è™šæ‹Ÿæ»šåŠ¨ | P0 | 8h |
| | å¤§æ–‡ä»¶ä¼˜åŒ– | P1 | 6h |
| | ç¼“å­˜ç­–ç•¥ | P1 | 4h |
| **é”™è¯¯å¤„ç†** | é”™è¯¯æœ¬åœ°åŒ– | P1 | 8h |
| | é”™è¯¯æ¢å¤å»ºè®® | P1 | 6h |
| | é”™è¯¯ä¸ŠæŠ¥ | P2 | 4h |

---

## ğŸ¯ æ ¸å¿ƒæ”¹è¿›æ–¹æ¡ˆ

### æ”¹è¿›1ï¼šé¡¶å±‚é¡¹ç›®ç®¡ç†å™¨

#### éœ€æ±‚åˆ†æ

**å½“å‰é—®é¢˜**:
- ç¨‹åºå¯åŠ¨æ—¶è¯»å–å½“å‰ç›®å½•çš„ `.cowork`ï¼Œæ— æ³•è·¨ç›®å½•ç®¡ç†é¡¹ç›®
- ç”¨æˆ·éœ€è¦åœ¨ä¸åŒçš„å·¥ä½œç›®å½•é—´åˆ‡æ¢ï¼Œä½“éªŒä¸æµç•…
- ç¼ºå°‘ç»Ÿä¸€çš„é¡¹ç›®åˆ—è¡¨è§†å›¾å’Œæ“ä½œå…¥å£

**ç›®æ ‡**:
- åœ¨ç³»ç»Ÿåº”ç”¨é…ç½®å­˜å‚¨ä½ç½®ï¼ˆå¦‚ Windows AppDataï¼‰ç®¡ç†æ‰€æœ‰é¡¹ç›®è®°å½•
- ä¸»ç•Œé¢æ–°å¢ "Projects" Tabï¼Œæ˜¾ç¤ºé¡¹ç›®åˆ—è¡¨
- æ”¯æŒ Openï¼ˆæ–°çª—å£æ‰“å¼€ï¼‰ã€Deleteã€Rename ç­‰æ“ä½œ
- Open æ“ä½œåœ¨æ–°è¿›ç¨‹/çª—å£ä¸­æ‰“å¼€æŒ‡å®šé¡¹ç›®ï¼Œé¿å…å¯¹ç°æœ‰å®ç°æ”¹åŠ¨è¿‡å¤§

#### æŠ€æœ¯æ–¹æ¡ˆ

**1. é¡¹ç›®æ³¨å†Œè¡¨è®¾è®¡**

```rust
// cowork-gui/src-tauri/src/project_registry.rs

use serde::{Serialize, Deserialize};
use std::path::PathBuf;
use chrono::{DateTime, Utc};

/// é¡¹ç›®æ³¨å†Œä¿¡æ¯
#[derive(Serialize, Deserialize, Clone)]
pub struct ProjectRecord {
    /// é¡¹ç›®å”¯ä¸€ID
    pub project_id: String,
    /// é¡¹ç›®åç§°
    pub name: String,
    /// é¡¹ç›®æè¿°
    pub description: Option<String>,
    /// é¡¹ç›®å·¥ä½œç›®å½•ï¼ˆç»å¯¹è·¯å¾„ï¼‰
    pub workspace_path: PathBuf,
    /// config.toml è·¯å¾„
    pub config_path: PathBuf,
    /// åˆ›å»ºæ—¶é—´
    pub created_at: DateTime<Utc>,
    /// æœ€åæ‰“å¼€æ—¶é—´
    pub last_opened_at: DateTime<Utc>,
    /// é¡¹ç›®çŠ¶æ€
    pub status: ProjectStatus,
    /// é¡¹ç›®ç±»å‹ï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰
    pub project_type: String,
    /// ä¼šè¯æ•°é‡
    pub session_count: usize,
    /// æœ€åå®Œæˆçš„ä¼šè¯ID
    pub last_completed_session: Option<String>,
}

#[derive(Serialize, Deserialize, Clone, PartialEq)]
pub enum ProjectStatus {
    Active,      // æœ‰è¿›è¡Œä¸­çš„ä¼šè¯
    Completed,   // å·²å®Œæˆï¼Œå¯ç»§ç»­å¼€å‘
    Archived,    // å·²å½’æ¡£
}

/// é¡¹ç›®æ³¨å†Œè¡¨
#[derive(Serialize, Deserialize)]
pub struct ProjectRegistry {
    pub version: String,
    pub projects: Vec<ProjectRecord>,
    pub settings: RegistrySettings,
}

#[derive(Serialize, Deserialize)]
pub struct RegistrySettings {
    pub default_project_id: Option<String>,
    pub auto_create_workspace: bool,
}

impl ProjectRegistry {
    pub fn new() -> Self {
        Self {
            version: "1.0".to_string(),
            projects: Vec::new(),
            settings: RegistrySettings {
                default_project_id: None,
                auto_create_workspace: true,
            },
        }
    }
}
```

**2. æ³¨å†Œè¡¨å­˜å‚¨ä½ç½®**

```rust
// è·å–åº”ç”¨æ•°æ®ç›®å½•
pub fn get_app_data_dir() -> Result<PathBuf> {
    #[cfg(target_os = "windows")]
    {
        let app_data = std::env::var("APPDATA")
            .or_else(|_| std::env::var("LOCALAPPDATA"))?;
        Ok(PathBuf::from(app_data).join("CoworkCreative"))
    }
    
    #[cfg(target_os = "macos")]
    {
        let home = std::env::var("HOME")?;
        Ok(PathBuf::from(home).join("Library").join("Application Support").join("CoworkCreative"))
    }
    
    #[cfg(target_os = "linux")]
    {
        let home = std::env::var("HOME")?;
        Ok(PathBuf::from(home).join(".config").join("cowork-creative"))
    }
}

/// æ³¨å†Œè¡¨æ–‡ä»¶è·¯å¾„
pub fn get_registry_path() -> Result<PathBuf> {
    let app_data_dir = get_app_data_dir()?;
    Ok(app_data_dir.join("project_registry.json"))
}

/// åŠ è½½é¡¹ç›®æ³¨å†Œè¡¨
pub fn load_registry() -> Result<ProjectRegistry> {
    let registry_path = get_registry_path()?;
    
    if !registry_path.exists() {
        // åˆ›å»ºé»˜è®¤æ³¨å†Œè¡¨
        let registry = ProjectRegistry::new();
        save_registry(&registry)?;
        return Ok(registry);
    }
    
    let content = std::fs::read_to_string(&registry_path)?;
    let registry: ProjectRegistry = serde_json::from_str(&content)?;
    Ok(registry)
}

/// ä¿å­˜é¡¹ç›®æ³¨å†Œè¡¨
pub fn save_registry(registry: &ProjectRegistry) -> Result<()> {
    let registry_path = get_registry_path()?;
    
    // ç¡®ä¿ç›®å½•å­˜åœ¨
    if let Some(parent) = registry_path.parent() {
        std::fs::create_dir_all(parent)?;
    }
    
    let content = serde_json::to_string_pretty(registry)?;
    std::fs::write(&registry_path, content)?;
    Ok(())
}
```

**3. é¡¹ç›®æ³¨å†Œä¸å‘ç°**

```rust
/// æ³¨å†Œæ–°é¡¹ç›®
pub fn register_project(
    workspace_path: PathBuf,
    config_path: PathBuf,
    name: Option<String>,
) -> Result<ProjectRecord> {
    let mut registry = load_registry()?;
    
    // ç”Ÿæˆé¡¹ç›®ID
    let project_id = format!("proj-{}", chrono::Utc::now().timestamp_millis());
    
    // è‡ªåŠ¨æ£€æµ‹é¡¹ç›®åç§°
    let project_name = name.unwrap_or_else(|| {
        workspace_path
            .file_name()
            .and_then(|n| n.to_str())
            .unwrap_or("Untitled Project")
            .to_string()
    });
    
    // æ£€æµ‹é¡¹ç›®ç±»å‹
    let project_type = detect_project_type(&workspace_path);
    
    // ç»Ÿè®¡ä¼šè¯æ•°é‡
    let session_count = count_sessions(&workspace_path)?;
    
    // åˆ›å»ºé¡¹ç›®è®°å½•
    let record = ProjectRecord {
        project_id: project_id.clone(),
        name: project_name,
        description: None,
        workspace_path: workspace_path.clone(),
        config_path,
        created_at: chrono::Utc::now(),
        last_opened_at: chrono::Utc::now(),
        status: ProjectStatus::Active,
        project_type,
        session_count,
        last_completed_session: find_last_completed_session(&workspace_path)?,
    };
    
    // æ£€æŸ¥æ˜¯å¦å·²æ³¨å†Œ
    if registry.projects.iter().any(|p| p.workspace_path == workspace_path) {
        return Err(anyhow::anyhow!("Project already registered"));
    }
    
    registry.projects.push(record);
    save_registry(&registry)?;
    
    Ok(record)
}

/// ä»å½“å‰ç›®å½•è‡ªåŠ¨æ³¨å†Œé¡¹ç›®
pub fn auto_register_current_project() -> Result<Option<ProjectRecord>> {
    let current_dir = std::env::current_dir()?;
    let config_path = current_dir.join("config.toml");
    
    // æ£€æŸ¥æ˜¯å¦æ˜¯æœ‰æ•ˆçš„ Cowork é¡¹ç›®
    if !config_path.exists() {
        return Ok(None);
    }
    
    let cowork_dir = current_dir.join(".cowork");
    if !cowork_dir.exists() {
        return Ok(None);
    }
    
    // æ£€æŸ¥æ˜¯å¦å·²æ³¨å†Œ
    let registry = load_registry()?;
    if registry.projects.iter().any(|p| p.workspace_path == current_dir) {
        return Ok(None);
    }
    
    // è‡ªåŠ¨æ³¨å†Œ
    let record = register_project(current_dir, config_path, None)?;
    Ok(Some(record))
}

/// åˆ é™¤é¡¹ç›®æ³¨å†Œï¼ˆä»…åˆ é™¤è®°å½•ï¼Œä¸åˆ é™¤å®é™…é¡¹ç›®æ–‡ä»¶ï¼‰
pub fn unregister_project(project_id: &str) -> Result<()> {
    let mut registry = load_registry()?;
    
    registry.projects.retain(|p| p.project_id != project_id);
    save_registry(&registry)?;
    
    Ok(())
}

/// æ›´æ–°é¡¹ç›®æœ€åæ‰“å¼€æ—¶é—´
pub fn update_last_opened(project_id: &str) -> Result<()> {
    let mut registry = load_registry()?;
    
    if let Some(project) = registry.projects.iter_mut().find(|p| p.project_id == project_id) {
        project.last_opened_at = chrono::Utc::now();
        save_registry(&registry)?;
    }
    
    Ok(())
}
```

**4. Tauri å‘½ä»¤å®ç°**

```rust
#[tauri::command]
pub async fn get_all_projects() -> Result<Vec<ProjectRecord>, String> {
    let registry = load_registry().map_err(|e| e.to_string())?;
    Ok(registry.projects)
}

#[tauri::command]
pub async fn get_project(project_id: String) -> Result<ProjectRecord, String> {
    let registry = load_registry().map_err(|e| e.to_string())?;
    
    registry
        .projects
        .into_iter()
        .find(|p| p.project_id == project_id)
        .ok_or_else(|| "Project not found".to_string())
}

#[tauri::command]
pub async fn register_project_from_path(
    workspace_path: String,
    name: Option<String>,
) -> Result<ProjectRecord, String> {
    let workspace = PathBuf::from(workspace_path);
    let config_path = workspace.join("config.toml");
    
    if !config_path.exists() {
        return Err("Invalid project directory: config.toml not found".to_string());
    }
    
    register_project(workspace, config_path, name)
        .map_err(|e| e.to_string())
}

#[tauri::command]
pub async fn delete_project(project_id: String, delete_files: bool) -> Result<(), String> {
    let registry = load_registry().map_err(|e| e.to_string())?;
    
    let project = registry
        .projects
        .iter()
        .find(|p| p.project_id == project_id)
        .ok_or_else(|| "Project not found".to_string())?;
    
    // å¦‚æœéœ€è¦åˆ é™¤æ–‡ä»¶
    if delete_files {
        std::fs::remove_dir_all(&project.workspace_path)
            .map_err(|e| format!("Failed to delete project files: {}", e))?;
    }
    
    // åˆ é™¤æ³¨å†Œè®°å½•
    unregister_project(&project_id).map_err(|e| e.to_string())?;
    
    Ok(())
}

#[tauri::command]
pub async fn open_project_in_new_window(
    project_id: String,
    app_handle: tauri::AppHandle,
) -> Result<(), String> {
    let registry = load_registry().map_err(|e| e.to_string())?;
    
    let project = registry
        .projects
        .iter()
        .find(|p| p.project_id == project_id)
        .ok_or_else(|| "Project not found".to_string())?;
    
    // æ›´æ–°æœ€åæ‰“å¼€æ—¶é—´
    update_last_opened(&project_id).map_err(|e| e.to_string())?;
    
    // åœ¨æ–°çª—å£ä¸­æ‰“å¼€é¡¹ç›®
    // ä½¿ç”¨ Tauri çš„ shell API æˆ–å¯åŠ¨æ–°è¿›ç¨‹
    #[cfg(target_os = "windows")]
    {
        let exe_path = std::env::current_exe()
            .map_err(|e| format!("Failed to get exe path: {}", e))?;
        
        std::process::Command::new(exe_path)
            .arg("--workspace")
            .arg(&project.workspace_path)
            .spawn()
            .map_err(|e| format!("Failed to open new window: {}", e))?;
    }
    
    Ok(())
}

#[tauri::command]
pub async fn update_project_info(
    project_id: String,
    name: Option<String>,
    description: Option<String>,
) -> Result<(), String> {
    let mut registry = load_registry().map_err(|e| e.to_string())?;
    
    if let Some(project) = registry.projects.iter_mut().find(|p| p.project_id == project_id) {
        if let Some(n) = name {
            project.name = n;
        }
        if let Some(d) = description {
            project.description = Some(d);
        }
        save_registry(&registry).map_err(|e| e.to_string())?;
    }
    
    Ok(())
}
```

**5. å‰ç«¯ UI å®ç°**

```jsx
// ProjectsPanel.jsx
import { useState, useEffect } from 'react';
import { invoke } from '@tauri-apps/api/core';
import { List, Button, Card, Tag, Space, Modal, Input, message } from 'antd';
import { FolderOpenOutlined, DeleteOutlined, EditOutlined, ClockOutlined } from '@ant-design/icons';

const ProjectsPanel = () => {
  const [projects, setProjects] = useState([]);
  const [loading, setLoading] = useState(true);
  const [deleteModalVisible, setDeleteModalVisible] = useState(false);
  const [selectedProject, setSelectedProject] = useState(null);
  const [editModalVisible, setEditModalVisible] = useState(false);
  const [editForm, setEditForm] = useState({ name: '', description: '' });

  const loadProjects = async () => {
    setLoading(true);
    try {
      const data = await invoke('get_all_projects');
      setProjects(data);
    } catch (error) {
      message.error('åŠ è½½é¡¹ç›®åˆ—è¡¨å¤±è´¥: ' + error);
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    loadProjects();
  }, []);

  const handleOpenProject = async (project) => {
    try {
      await invoke('open_project_in_new_window', { projectId: project.project_id });
      message.success('æ­£åœ¨æ‰“å¼€é¡¹ç›®...');
    } catch (error) {
      message.error('æ‰“å¼€é¡¹ç›®å¤±è´¥: ' + error);
    }
  };

  const handleDeleteProject = (project) => {
    setSelectedProject(project);
    setDeleteModalVisible(true);
  };

  const confirmDelete = async (deleteFiles) => {
    try {
      await invoke('delete_project', { 
        projectId: selectedProject.project_id, 
        deleteFiles 
      });
      message.success('é¡¹ç›®å·²åˆ é™¤');
      setDeleteModalVisible(false);
      loadProjects();
    } catch (error) {
      message.error('åˆ é™¤é¡¹ç›®å¤±è´¥: ' + error);
    }
  };

  const handleEditProject = (project) => {
    setSelectedProject(project);
    setEditForm({
      name: project.name,
      description: project.description || ''
    });
    setEditModalVisible(true);
  };

  const saveEdit = async () => {
    try {
      await invoke('update_project_info', {
        projectId: selectedProject.project_id,
        name: editForm.name,
        description: editForm.description
      });
      message.success('é¡¹ç›®ä¿¡æ¯å·²æ›´æ–°');
      setEditModalVisible(false);
      loadProjects();
    } catch (error) {
      message.error('æ›´æ–°é¡¹ç›®ä¿¡æ¯å¤±è´¥: ' + error);
    }
  };

  const formatDateTime = (timestamp) => {
    return new Date(timestamp).toLocaleString('zh-CN');
  };

  return (
    <div className="projects-panel">
      <div style={{ marginBottom: '20px', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
        <h2>ğŸ“ æˆ‘çš„é¡¹ç›®</h2>
        <Button type="primary" onClick={() => message.info('è¯·ä½¿ç”¨èœå•æ åˆ›å»ºæ–°é¡¹ç›®')}>
          + æ–°å»ºé¡¹ç›®
        </Button>
      </div>

      {loading ? (
        <div>åŠ è½½ä¸­...</div>
      ) : projects.length === 0 ? (
        <div style={{ textAlign: 'center', padding: '60px 0', color: '#888' }}>
          <p>è¿˜æ²¡æœ‰é¡¹ç›®</p>
          <p>åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼Œæˆ–æ‰“å¼€ç°æœ‰çš„ Cowork é¡¹ç›®ç›®å½•</p>
        </div>
      ) : (
        <List
          grid={{ gutter: 16, xs: 1, sm: 2, md: 2, lg: 3, xl: 3, xxl: 4 }}
          dataSource={projects}
          renderItem={(project) => (
            <List.Item>
              <Card
                hoverable
                actions={[
                  <Button 
                    icon={<FolderOpenOutlined />} 
                    onClick={() => handleOpenProject(project)}
                    type="primary"
                  >
                    æ‰“å¼€
                  </Button>,
                  <Button 
                    icon={<EditOutlined />} 
                    onClick={() => handleEditProject(project)}
                  >
                    ç¼–è¾‘
                  </Button>,
                  <Button 
                    danger 
                    icon={<DeleteOutlined />} 
                    onClick={() => handleDeleteProject(project)}
                  >
                    åˆ é™¤
                  </Button>,
                ]}
              >
                <Card.Meta
                  title={project.name}
                  description={project.description || 'æš‚æ— æè¿°'}
                />
                <div style={{ marginTop: '12px' }}>
                  <Tag color={project.status === 'Active' ? 'green' : 'blue'}>
                    {project.status}
                  </Tag>
                  <Tag>{project.project_type}</Tag>
                </div>
                <div style={{ marginTop: '8px', fontSize: '12px', color: '#888' }}>
                  <div>ğŸ“Š {project.session_count} ä¸ªä¼šè¯</div>
                  <div><ClockOutlined /> æœ€åæ‰“å¼€: {formatDateTime(project.last_opened_at)}</div>
                </div>
              </Card>
            </List.Item>
          )}
        />
      )}

      {/* åˆ é™¤ç¡®è®¤å¯¹è¯æ¡† */}
      <Modal
        title="åˆ é™¤é¡¹ç›®"
        open={deleteModalVisible}
        onOk={() => confirmDelete(false)}
        onCancel={() => setDeleteModalVisible(false)}
        okText="ä»…åˆ é™¤è®°å½•"
        okButtonProps={{ danger: true }}
        cancelText="å–æ¶ˆ"
      >
        <p>ç¡®å®šè¦åˆ é™¤é¡¹ç›® "{selectedProject?.name}" å—ï¼Ÿ</p>
        <p style={{ color: '#ff4d4f', fontSize: '12px' }}>
          âš ï¸ æ­¤æ“ä½œä»…åˆ é™¤é¡¹ç›®æ³¨å†Œè®°å½•ï¼Œä¸ä¼šåˆ é™¤å®é™…çš„é¡¹ç›®æ–‡ä»¶ã€‚
        </p>
      </Modal>

      {/* ç¼–è¾‘é¡¹ç›®å¯¹è¯æ¡† */}
      <Modal
        title="ç¼–è¾‘é¡¹ç›®"
        open={editModalVisible}
        onOk={saveEdit}
        onCancel={() => setEditModalVisible(false)}
      >
        <Space direction="vertical" style={{ width: '100%' }}>
          <div>
            <label>é¡¹ç›®åç§°:</label>
            <Input 
              value={editForm.name} 
              onChange={(e) => setEditForm({...editForm, name: e.target.value})}
            />
          </div>
          <div>
            <label>é¡¹ç›®æè¿°:</label>
            <Input.TextArea 
              value={editForm.description}
              onChange={(e) => setEditForm({...editForm, description: e.target.value})}
              rows={3}
            />
          </div>
        </Space>
      </Modal>
    </div>
  );
};

export default ProjectsPanel;
```

**6. App.jsx é›†æˆ**

```jsx
// åœ¨ App.jsx ä¸­æ·»åŠ  Projects Tab
import ProjectsPanel from './components/ProjectsPanel';

// åœ¨ Menu items ä¸­æ·»åŠ 
{ key: 'projects', icon: <FolderOutlined />, label: 'Projects' },

// åœ¨ renderContent ä¸­æ·»åŠ 
case 'projects':
  return <ProjectsPanel />;
```

**7. å¯åŠ¨å‚æ•°å¤„ç†**

```rust
// main.rs
use tauri::utils::platform::current_platform;

#[cfg_attr(mobile, tauri::mobile_entry_point)]
pub fn run() {
    // è§£æå‘½ä»¤è¡Œå‚æ•°
    let args: Vec<String> = std::env::args().collect();
    
    let workspace_path = if args.len() > 1 && args[1] == "--workspace" {
        Some(args.get(2).cloned())
    } else {
        None
    };
    
    tauri::Builder::default()
        .plugin(tauri_plugin_shell::init())
        .invoke_handler(tauri::generate_handler![
            greet,
            create_project,
            // ... å…¶ä»–å‘½ä»¤
            get_all_projects,
            open_project_in_new_window,
            // ...
        ])
        .setup(move |app| {
            // å¦‚æœæŒ‡å®šäº†å·¥ä½œåŒºè·¯å¾„ï¼Œåˆ‡æ¢åˆ°è¯¥ç›®å½•
            if let Some(path) = workspace_path {
                std::env::set_current_dir(&path)
                    .expect("Failed to set working directory");
            }
            
            // å…¶ä»–åˆå§‹åŒ–...
            Ok(())
        })
        .run(tauri::generate_context!())
        .expect("error while running tauri application");
}
```

**é¢„æœŸæ•ˆæœ**:
- âœ… ç»Ÿä¸€çš„é¡¹ç›®ç®¡ç†ç•Œé¢
- âœ… æ”¯æŒè·¨ç›®å½•ç®¡ç†å¤šä¸ªé¡¹ç›®
- âœ… æ–°çª—å£æ‰“å¼€é¡¹ç›®ï¼Œä¸å½±å“å½“å‰å·¥ä½œ
- âœ… é¡¹ç›®ä¿¡æ¯æŒä¹…åŒ–å­˜å‚¨
- âœ… å¿«é€Ÿåˆ‡æ¢é¡¹ç›®

**é¢„è®¡å·¥æ—¶**: 40å°æ—¶

---

### æ”¹è¿›2ï¼šæ™ºèƒ½è¿­ä»£è°ƒåº¦ Agent

#### éœ€æ±‚åˆ†æ

**å½“å‰é—®é¢˜**:
- New åˆ›å»ºçš„é¡¹ç›®åœ¨ Completed åæ— æ³•ç»§ç»­èŠå¤©äº¤äº’
- ç”¨æˆ·éœ€è¦æ‰‹åŠ¨é€‰æ‹© Resume/Modify æ“ä½œï¼Œå­¦ä¹ æˆæœ¬é«˜
- é¡¹ç›®å®Œæˆåç»§ç»­å¼€å‘çš„æµç¨‹ä¸å¤Ÿè‡ªç„¶
- ç¼ºå°‘æ™ºèƒ½ Agent æ¥åˆ¤æ–­ç”¨æˆ·æ„å›¾å¹¶è‡ªåŠ¨è°ƒåº¦

**ç›®æ ‡**:
- é¡¹ç›® Completed åï¼ŒèŠå¤©æ¡†ç»§ç»­å¯ç”¨
- å¼•å…¥æ™ºèƒ½ Agentï¼ˆIterativeAssistantï¼‰è‡ªåŠ¨è°ƒåº¦ä¿®æ”¹æ¨¡å¼
- æ ¹æ®ç”¨æˆ·è¾“å…¥æ™ºèƒ½åˆ¤æ–­æ˜¯å¦éœ€è¦ Resume/Modify/New
- æä¾›æ›´è‡ªç„¶çš„æŒç»­å¼€å‘ä½“éªŒ

#### æŠ€æœ¯æ–¹æ¡ˆ

**1. è¿­ä»£åŠ©æ‰‹ Agent è®¾è®¡**

```rust
// cowork-core/src/agents/iterative_assistant.rs

use anyhow::Result;
use adk_core::{Agent, InvocationContext, Event, EventStream};

/// è¿­ä»£åŠ©æ‰‹ Agent - è´Ÿè´£æ™ºèƒ½è°ƒåº¦ä¿®æ”¹æ¨¡å¼
pub struct IterativeAssistant {
    llm: Arc<dyn Llm>,
}

impl IterativeAssistant {
    pub fn new(llm: Arc<dyn Llm>) -> Self {
        Self { llm }
    }
    
    /// åˆ†æç”¨æˆ·æ„å›¾
    pub async fn analyze_user_intent(&self, 
        user_input: &str, 
        current_session_status: &SessionStatus,
        project_context: &ProjectContext
    ) -> Result<IterationIntent> {
        let prompt = format!(
            r#"ä½ æ˜¯ä¸€ä¸ªè¿­ä»£å¼€å‘åŠ©æ‰‹ã€‚è¯·åˆ†æç”¨æˆ·çš„è¾“å…¥ï¼Œåˆ¤æ–­ç”¨æˆ·æƒ³è¦åšä»€ä¹ˆã€‚

å½“å‰é¡¹ç›®çŠ¶æ€ï¼š
- é¡¹ç›®åç§°: {}
- ä¼šè¯çŠ¶æ€: {:?}
- æœ€åå®Œæˆé˜¶æ®µ: {}
- ä»£ç æ–‡ä»¶æ•°é‡: {}

ç”¨æˆ·è¾“å…¥: {}

è¯·åˆ¤æ–­ç”¨æˆ·çš„æ„å›¾ï¼Œè¿”å›ä»¥ä¸‹é€‰é¡¹ä¹‹ä¸€ï¼š
1. CONTINUE_DEVELOPMENT - ç»§ç»­å¼€å‘å½“å‰é¡¹ç›®ï¼ˆéœ€è¦ä½¿ç”¨ Modify æ¨¡å¼ï¼‰
2. START_NEW_FEATURE - å¼€å‘æ–°åŠŸèƒ½ï¼ˆéœ€è¦ä½¿ç”¨ Modify æ¨¡å¼ï¼‰
3. FIX_BUG - ä¿®å¤é—®é¢˜ï¼ˆéœ€è¦ä½¿ç”¨ Modify æ¨¡å¼ï¼‰
4. REFACTOR - é‡æ„ä»£ç ï¼ˆéœ€è¦ä½¿ç”¨ Modify æ¨¡å¼ï¼‰
5. NEW_PROJECT - åˆ›å»ºå…¨æ–°é¡¹ç›®
6. CLARIFICATION - éœ€è¦æ›´å¤šä¿¡æ¯

è¿”å›æ ¼å¼ï¼š{{"intent": "INTENT_TYPE", "confidence": 0.9, "reasoning": "åŸå› è¯´æ˜"}}"#,
            project_context.name,
            current_session_status,
            project_context.last_completed_stage,
            project_context.code_file_count,
            user_input
        );
        
        let response = self.llm.generate(&prompt).await?;
        let intent: IterationIntent = serde_json::from_str(&response)?;
        Ok(intent)
    }
    
    /// ç”Ÿæˆä¿®æ”¹å»ºè®®
    pub async fn generate_modify_suggestion(&self,
        user_input: &str,
        project_context: &ProjectContext
    ) -> Result<ModifySuggestion> {
        let prompt = format!(
            r#"ç”¨æˆ·æƒ³è¦å¯¹ç°æœ‰é¡¹ç›®è¿›è¡Œä¿®æ”¹ã€‚

é¡¹ç›®ä¿¡æ¯ï¼š
- é¡¹ç›®åç§°: {}
- é¡¹ç›®æè¿°: {}
- å·²å®ŒæˆåŠŸèƒ½: {}
- ä»£ç æ–‡ä»¶: {}

ç”¨æˆ·éœ€æ±‚: {}

è¯·ç”Ÿæˆä¿®æ”¹å»ºè®®ï¼ŒåŒ…æ‹¬ï¼š
1. ä¿®æ”¹ç±»å‹ï¼ˆåŠŸèƒ½å¢å¼ºã€Bugä¿®å¤ã€é‡æ„ç­‰ï¼‰
2. å—å½±å“çš„æ¨¡å—
3. å»ºè®®çš„å®æ–½æ–¹æ¡ˆ
4. é£é™©è¯„ä¼°

è¿”å›æ ¼å¼ï¼š{{
    "modify_type": "ç±»å‹",
    "affected_modules": ["æ¨¡å—1", "æ¨¡å—2"],
    "implementation_plan": "å®æ–½è®¡åˆ’",
    "risk_assessment": "é£é™©è¯„ä¼°"
}}"#,
            project_context.name,
            project_context.description,
            project_context.completed_features.join(", "),
            project_context.code_files.join(", "),
            user_input
        );
        
        let response = self.llm.generate(&prompt).await?;
        let suggestion: ModifySuggestion = serde_json::from_str(&response)?;
        Ok(suggestion)
    }
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct IterationIntent {
    pub intent: IntentType,
    pub confidence: f64,
    pub reasoning: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
#[serde(rename_all = "SCREAMING_SNAKE_CASE")]
pub enum IntentType {
    ContinueDevelopment,
    StartNewFeature,
    FixBug,
    Refactor,
    NewProject,
    Clarification,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ModifySuggestion {
    pub modify_type: String,
    pub affected_modules: Vec<String>,
    pub implementation_plan: String,
    pub risk_assessment: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ProjectContext {
    pub name: String,
    pub description: String,
    pub last_completed_stage: String,
    pub code_file_count: usize,
    pub completed_features: Vec<String>,
    pub code_files: Vec<String>,
}
```

**2. æŒç»­èŠå¤©äº¤äº’å¢å¼º**

```rust
// cowork-gui/src-tauri/src/lib.rs

#[tauri::command]
async fn send_chat_message(
    message: String,
    window: Window,
    state: State<'_, AppState>,
) -> Result<String, String> {
    info!("Chat message: {}", message);
    
    // æ£€æŸ¥å½“å‰æ˜¯å¦æœ‰æ´»è·ƒä¼šè¯
    let current_session = get_current_session()?;
    
    match current_session.status {
        SessionStatus::InProgress => {
            // ä¼šè¯è¿›è¡Œä¸­ï¼Œç›´æ¥è½¬å‘æ¶ˆæ¯
            handle_active_session_message(message, window, state).await
        }
        SessionStatus::Completed => {
            // ä¼šè¯å·²å®Œæˆï¼Œéœ€è¦æ™ºèƒ½è°ƒåº¦
            handle_completed_session_message(message, window, state).await
        }
        SessionStatus::Failed => {
            // ä¼šè¯å¤±è´¥ï¼Œå»ºè®®æ¢å¤
            Err("ä¼šè¯å¤±è´¥ï¼Œè¯·é€‰æ‹©æ¢å¤æˆ–é‡æ–°åˆ›å»º".to_string())
        }
    }
}

async fn handle_completed_session_message(
    message: String,
    window: Window,
    state: State<'_, AppState>,
) -> Result<String, String> {
    // åŠ è½½é¡¹ç›®ä¸Šä¸‹æ–‡
    let project_context = load_project_context()?;
    
    // åˆ›å»ºè¿­ä»£åŠ©æ‰‹
    let llm = load_llm_config()?;
    let assistant = IterativeAssistant::new(llm);
    
    // åˆ†æç”¨æˆ·æ„å›¾
    let intent = assistant.analyze_user_intent(&message, &SessionStatus::Completed, &project_context).await
        .map_err(|e| format!("åˆ†ææ„å›¾å¤±è´¥: {}", e))?;
    
    info!("User intent: {:?} (confidence: {})", intent.intent, intent.confidence);
    
    match intent.intent {
        IntentType::ContinueDevelopment |
        IntentType::StartNewFeature |
        IntentType::FixBug |
        IntentType::Refactor => {
            // è‡ªåŠ¨å¯åŠ¨ Modify æµç¨‹
            info!("Starting modify workflow for intent: {:?}", intent.intent);
            
            // ç”Ÿæˆä¿®æ”¹å»ºè®®
            let suggestion = assistant.generate_modify_suggestion(&message, &project_context).await
                .map_err(|e| format!("ç”Ÿæˆä¿®æ”¹å»ºè®®å¤±è´¥: {}", e))?;
            
            // å‘é€å»ºè®®åˆ°å‰ç«¯
            window.emit("modify_suggestion", serde_json::json!({
                "intent": intent,
                "suggestion": suggestion,
                "user_input": message
            }))?;
            
            // æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
            window.emit("confirm_modify", serde_json::json!({
                "message": format!("æ£€æµ‹åˆ°æ‚¨æƒ³è¦: {}", intent.reasoning),
                "suggestion": suggestion,
                "auto_mode": true
            }))?;
            
            Ok("waiting_for_confirmation".to_string())
        }
        IntentType::NewProject => {
            // å»ºè®®åˆ›å»ºæ–°é¡¹ç›®
            window.emit("suggest_new_project", serde_json::json!({
                "message": "æ£€æµ‹åˆ°æ‚¨æƒ³è¦åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®",
                "user_input": message
            }))?;
            Ok("suggest_new_project".to_string())
        }
        IntentType::Clarification => {
            // éœ€è¦æ›´å¤šä¿¡æ¯
            window.emit("request_clarification", serde_json::json!({
                "message": intent.reasoning,
                "user_input": message
            }))?;
            Ok("request_clarification".to_string())
        }
    }
}

#[tauri::command]
async fn confirm_auto_modify(
    user_input: String,
    window: Window,
    state: State<'_, AppState>,
) -> Result<String, String> {
    info!("Auto-modify confirmed: {}", user_input);
    
    // è·å–å½“å‰ä¼šè¯ID
    let current_session = get_current_session()?;
    
    // åˆ›å»º Modify ç±»å‹çš„ä¼šè¯
    let new_session_id = create_modify_session(&current_session.session_id, &user_input)?;
    
    // æ‰§è¡Œ Modify Pipeline
    let result = execute_modify_pipeline(&new_session_id, window, state).await?;
    
    Ok(new_session_id)
}

#[tauri::command]
async fn cancel_auto_modify() -> Result<(), String> {
    info!("Auto-modify canceled");
    Ok(())
}
```

**3. å‰ç«¯æ™ºèƒ½äº¤äº’å¢å¼º**

```jsx
// App.jsx - å¢å¼ºèŠå¤©äº¤äº’

useEffect(() => {
    // ... ç°æœ‰çš„äº‹ä»¶ç›‘å¬ ...
    
    // ç›‘å¬ä¿®æ”¹å»ºè®®
    const unlistenModifySuggestion = listen('modify_suggestion', (event) => {
        const { intent, suggestion, user_input } = event.payload;
        
        Modal.confirm({
            title: 'ç»§ç»­å¼€å‘',
            width: 600,
            content: (
                <div>
                    <p><strong>æ£€æµ‹åˆ°æ‚¨çš„æ„å›¾:</strong></p>
                    <p>{intent.reasoning}</p>
                    
                    <Divider />
                    
                    <p><strong>ä¿®æ”¹å»ºè®®:</strong></p>
                    <p><strong>ç±»å‹:</strong> {suggestion.modify_type}</p>
                    <p><strong>å—å½±å“æ¨¡å—:</strong> {suggestion.affected_modules.join(', ')}</p>
                    <p><strong>å®æ–½è®¡åˆ’:</strong></p>
                    <pre style={{ background: '#f5f5f5', padding: '10px', borderRadius: '4px' }}>
                        {suggestion.implementation_plan}
                    </pre>
                    <p><strong>é£é™©è¯„ä¼°:</strong> {suggestion.risk_assessment}</p>
                </div>
            ),
            okText: 'å¼€å§‹ä¿®æ”¹',
            cancelText: 'å–æ¶ˆ',
            onOk: async () => {
                try {
                    const newSessionId = await invoke('confirm_auto_modify', { 
                        userInput: user_input 
                    });
                    setCurrentSession(newSessionId);
                    setMessages(prev => [...prev, { 
                        type: 'system', 
                        content: 'âœ… å·²å¯åŠ¨ä¿®æ”¹æµç¨‹ï¼Œæ­£åœ¨ç”Ÿæˆä»£ç ...', 
                        timestamp: new Date().toISOString() 
                    }]);
                } catch (error) {
                    message.error('å¯åŠ¨ä¿®æ”¹å¤±è´¥: ' + error);
                }
            },
            onCancel: async () => {
                await invoke('cancel_auto_modify');
            }
        });
    });
    
    // ç›‘å¬æ–°é¡¹ç›®å»ºè®®
    const unlistenSuggestNewProject = listen('suggest_new_project', (event) => {
        const { message, user_input } = event.payload;
        
        Modal.confirm({
            title: 'åˆ›å»ºæ–°é¡¹ç›®',
            content: (
                <div>
                    <p>{message}</p>
                    <p>æ‚¨çš„è¾“å…¥: "{user_input}"</p>
                    <p>æ˜¯å¦åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼Ÿ</p>
                </div>
            ),
            okText: 'åˆ›å»ºæ–°é¡¹ç›®',
            cancelText: 'å–æ¶ˆ',
            onOk: () => {
                setProjectIdea(user_input);
                handleCreateProject();
            }
        });
    });
    
    // ç›‘å¬æ¾„æ¸…è¯·æ±‚
    const unlistenRequestClarification = listen('request_clarification', (event) => {
        const { message, user_input } = event.payload;
        
        message.warning(message);
        setMessages(prev => [...prev, { 
            type: 'system', 
            content: `â“ ${message}ï¼Œè¯·æä¾›æ›´å¤šä¿¡æ¯ã€‚`, 
            timestamp: new Date().toISOString() 
        }]);
    });
    
    return () => {
        unlistenModifySuggestion.then(f => f());
        unlistenSuggestNewProject.then(f => f());
        unlistenRequestClarification.then(f => f());
    };
}, []);

// ä¿®æ”¹å‘é€æ¶ˆæ¯çš„é€»è¾‘
const handleSendUserMessage = async () => {
    if (!userInput.trim()) return;
    
    // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
    setMessages(prev => [...prev, { 
        type: 'user', 
        content: userInput, 
        timestamp: new Date().toISOString() 
    }]);
    
    const message = userInput.trim();
    setUserInput('');
    
    // æ£€æŸ¥æ˜¯å¦æ˜¯ HITL å“åº”
    if (inputRequest) {
        await invoke('submit_input_response', { 
            requestId: inputRequest.requestId, 
            response: message, 
            responseType: 'text' 
        });
        setInputRequest(null);
    } else {
        // æ™®é€šèŠå¤©æ¶ˆæ¯
        try {
            const result = await invoke('send_chat_message', { message });
            
            // å¦‚æœéœ€è¦ç¡®è®¤ï¼Œç­‰å¾…ç”¨æˆ·æ“ä½œ
            if (result !== 'waiting_for_confirmation' && result !== 'suggest_new_project') {
                setMessages(prev => [...prev, { 
                    type: 'system', 
                    content: 'ğŸ’­ æ­£åœ¨å¤„ç†æ‚¨çš„è¯·æ±‚...', 
                    timestamp: new Date().toISOString() 
                }]);
            }
        } catch (error) {
            message.error('å‘é€æ¶ˆæ¯å¤±è´¥: ' + error);
        }
    }
};
```

**4. é¡¹ç›®ä¸Šä¸‹æ–‡åŠ è½½**

```rust
fn load_project_context() -> Result<ProjectContext> {
    let index = load_project_index()?;
    
    // è·å–é¡¹ç›®ä¿¡æ¯
    let project_name = index.project_name.clone();
    let project_description = index.description.clone();
    
    // è·å–æœ€æ–°çš„å·²å®Œæˆä¼šè¯
    let last_completed = index.sessions
        .iter()
        .filter(|s| s.status == SessionStatus::Completed)
        .max_by_key(|s| s.created_at);
    
    let last_completed_stage = last_completed
        .and_then(|s| s.last_completed_stage.clone())
        .unwrap_or_else(|| "unknown".to_string());
    
    // ç»Ÿè®¡ä»£ç æ–‡ä»¶
    let code_files = collect_code_files()?;
    let code_file_count = code_files.len();
    
    // è·å–å·²å®ŒæˆåŠŸèƒ½
    let completed_features = load_completed_features()?;
    
    Ok(ProjectContext {
        name: project_name,
        description: project_description,
        last_completed_stage,
        code_file_count,
        completed_features,
        code_files,
    })
}

fn collect_code_files() -> Result<Vec<String>> {
    let mut files = Vec::new();
    let current_dir = std::env::current_dir()?;
    
    // éå†é¡¹ç›®ç›®å½•ï¼Œæ”¶é›†ä»£ç æ–‡ä»¶
    for entry in walkdir::WalkDir::new(&current_dir)
        .into_iter()
        .filter_entry(|e| !e.path().starts_with(".cowork") && !e.path().starts_with("target"))
    {
        let entry = entry?;
        if entry.path().is_file() {
            if let Some(ext) = entry.path().extension() {
                if matches!(ext.to_str(), Some("rs") | Some("js") | Some("jsx") | Some("ts") | Some("tsx") | Some("py")) {
                    if let Ok(path) = entry.path().strip_prefix(&current_dir) {
                        files.push(path.to_string_lossy().to_string());
                    }
                }
            }
        }
    }
    
    Ok(files)
}

fn load_completed_features() -> Result<Vec<String>> {
    let index = load_project_index()?;
    
    // ä»æ‰€æœ‰å·²å®Œæˆä¼šè¯ä¸­æå–åŠŸèƒ½
    let mut features = Vec::new();
    
    for session in &index.sessions {
        if session.status == SessionStatus::Completed {
            if let Ok(session_dir) = get_session_dir(&session.session_id) {
                let features_file = session_dir.join("artifacts").join("features.json");
                if features_file.exists() {
                    if let Ok(content) = std::fs::read_to_string(features_file) {
                        if let Ok(feature_list) = serde_json::from_str::<FeatureList>(&content) {
                            features.extend(feature_list.features.iter().map(|f| f.name.clone()));
                        }
                    }
                }
            }
        }
    }
    
    Ok(features)
}
```

**5. åˆ›å»º Modify ä¼šè¯**

```rust
fn create_modify_session(base_session_id: &str, user_input: &str) -> Result<String> {
    let new_session_id = format!("session-{}", chrono::Utc::now().timestamp());
    
    let mut index = load_project_index()?;
    
    // åˆ›å»º Modify ç±»å‹çš„ä¼šè¯è®°å½•
    let session_record = SessionRecord {
        session_id: new_session_id.clone(),
        session_type: SessionType::Modify,
        created_at: chrono::Utc::now(),
        completed_at: None,
        status: SessionStatus::InProgress,
        base_session_id: Some(base_session_id.to_string()),
        input_description: user_input.to_string(),
        change_request_id: None,
    };
    
    index.add_session(session_record);
    save_project_index(&index)?;
    
    // ä¿å­˜ä¼šè¯è¾“å…¥
    let session_input = SessionInput {
        session_id: new_session_id.clone(),
        session_type: SessionType::Modify,
        description: user_input.to_string(),
        base_session_id: Some(base_session_id.to_string()),
        created_at: chrono::Utc::now(),
    };
    
    save_session_input(&new_session_id, &session_input)?;
    
    Ok(new_session_id)
}

async fn execute_modify_pipeline(
    session_id: &str,
    window: Window,
    state: State<'_, AppState>,
) -> Result<String, String> {
    // åŠ è½½é…ç½®
    let config = load_config()?;
    
    // è·å–åŸºç¡€ä¼šè¯
    let index = load_project_index()?;
    let base_session = index.sessions
        .iter()
        .find(|s| s.session_id == session_id)
        .ok_or("Session not found")?;
    
    let base_session_id = base_session.base_session_id
        .as_ref()
        .ok_or("No base session")?;
    
    // åˆ›å»ºäº¤äº’åç«¯
    let interaction = Arc::new(TauriBackend::new(
        window.app_handle().clone(),
        state.event_bus.clone(),
        state.pending_requests.clone(),
    ));
    
    // åˆ›å»º Modify Pipeline
    let pipeline = create_modify_pipeline(&config, session_id, base_session_id, interaction)
        .map_err(|e| format!("Failed to create modify pipeline: {}", e))?;
    
    // åœ¨åå°æ‰§è¡Œ
    let pipeline_clone = pipeline;
    let session_id_clone = session_id.to_string();
    let window_clone = window.app_handle().clone();
    
    tokio::spawn(async move {
        // ... æ‰§è¡Œ pipeline çš„é€»è¾‘ ...
        let result = execute_pipeline_async(pipeline_clone, session_id_clone, window_clone).await;
        
        match result {
            Ok(_) => {
                mark_session_completed(session_id).ok();
            }
            Err(e) => {
                mark_session_failed(session_id, &e.to_string()).ok();
            }
        }
    });
    
    Ok(session_id.to_string())
}
```

**6. ç”¨æˆ·ç•Œé¢ä¼˜åŒ–**

```jsx
// åœ¨èŠå¤©ç•Œé¢æ·»åŠ çŠ¶æ€æŒ‡ç¤ºå™¨
const renderChatHeader = () => {
    const currentSessionData = sessions.find(s => s.id === currentSession);
    
    return (
        <div style={{ 
            padding: '12px 20px', 
            borderBottom: '1px solid #303030',
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center'
        }}>
            <div>
                <h3 style={{ margin: 0 }}>ğŸ’¬ å¯¹è¯</h3>
                {currentSessionData && (
                    <span style={{ fontSize: '12px', color: '#888' }}>
                        ä¼šè¯: {currentSessionData.id.substring(0, 12)}... Â· 
                        çŠ¶æ€: {currentSessionData.status}
                    </span>
                )}
            </div>
            {currentSessionData?.status === 'Completed' && (
                <Tag color="blue">âœ¨ å¯ç»§ç»­å¼€å‘ - ç›´æ¥å‘é€æ¶ˆæ¯å³å¯</Tag>
            )}
        </div>
    );
};
```

**é¢„æœŸæ•ˆæœ**:
- âœ… é¡¹ç›®å®Œæˆåç»§ç»­äº¤äº’
- âœ… æ™ºèƒ½åˆ¤æ–­ç”¨æˆ·æ„å›¾
- âœ… è‡ªåŠ¨è°ƒåº¦ Modify æ¨¡å¼
- âœ… æä¾›ä¿®æ”¹å»ºè®®å’Œé£é™©è¯„ä¼°
- âœ… æ›´è‡ªç„¶çš„æŒç»­å¼€å‘ä½“éªŒ

**é¢„è®¡å·¥æ—¶**: 32å°æ—¶

---

## ğŸš€ è¿­ä»£è·¯çº¿å›¾ï¼ˆæ›´æ–°ç‰ˆï¼‰

### Phase 1: æ ¸å¿ƒä½“éªŒä¼˜åŒ– (2-3å‘¨)

**ç›®æ ‡**: ä¿®å¤å…³é”®é—®é¢˜ï¼Œæå‡åŸºç¡€ä½“éªŒ

#### 1.1 å®ç°å®æ—¶æ—¥å¿—æµ (P0)
**é—®é¢˜æè¿°**: RunnerPanel åªæ˜¾ç¤ºå¯åŠ¨æ—¶çš„é™æ€æ—¥å¿—ï¼Œæ— æ³•å®æ—¶æŸ¥çœ‹é¡¹ç›®è¿è¡Œè¾“å‡º

**è§£å†³æ–¹æ¡ˆ**:
```rust
// åœ¨ project_runner.rs ä¸­æ·»åŠ å®æ—¶æ—¥å¿—æ¨é€
pub async fn start(&self, session_id: String, command: String, window: Window) -> Result<u32, String> {
    // ... å¯åŠ¨è¿›ç¨‹ ...
    
    // å®æ—¶æ¨é€ stdout
    tokio::spawn(async move {
        let mut reader = BufReader::new(stdout);
        let mut line = String::new();
        while reader.read_line(&mut line).await? > 0 {
            window.emit("log_output", (session_id.clone(), "stdout", line.clone()))?;
            line.clear();
        }
        Ok::<(), anyhow::Error>(())
    });
    
    // å®æ—¶æ¨é€ stderr
    tokio::spawn(async move {
        let mut reader = BufReader::new(stderr);
        let mut line = String::new();
        while reader.read_line(&mut line).await? > 0 {
            window.emit("log_output", (session_id.clone(), "stderr", line.clone()))?;
            line.clear();
        }
        Ok::<(), anyhow::Error>(())
    });
}
```

**å‰ç«¯å®ç°**:
```jsx
// RunnerPanel.jsx
useEffect(() => {
  const unlisten = listen('log_output', (event) => {
    const [sessionId, stream, line] = event.payload;
    if (sessionId === currentSession) {
      setLogs(prev => [...prev, { stream, content: line, timestamp: Date.now() }]);
    }
  });
  return () => unlisten.then(f => f());
}, [currentSession]);
```

**é¢„æœŸæ•ˆæœ**:
- âœ… å®æ—¶æ˜¾ç¤ºé¡¹ç›®è¿è¡Œæ—¥å¿—
- âœ… åŒºåˆ† stdout å’Œ stderr
- âœ… æ—¥å¿—è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
- âœ… æ”¯æŒæ—¥å¿—å¤åˆ¶å’Œæ¸…ç©º

**é¢„è®¡å·¥æ—¶**: 8å°æ—¶

#### 1.2 æ€§èƒ½ä¼˜åŒ–ï¼šè™šæ‹Ÿæ»šåŠ¨ (P0)
**é—®é¢˜æè¿°**: æ–‡ä»¶æ ‘åœ¨å¤§å‹é¡¹ç›®ä¸­æ€§èƒ½å·®ï¼Œå¡é¡¿ä¸¥é‡

**è§£å†³æ–¹æ¡ˆ**:
```jsx
// ä½¿ç”¨ react-window å®ç°è™šæ‹Ÿæ»šåŠ¨
import { FixedSizeTree as Tree } from 'react-vtree';

const CodeEditor = () => {
  return (
    <Tree
      treeWalker={treeWalker}
      height={600}
      width={300}
      itemSize={30}
      renderItem={({ data, depth, isOpen, style }) => (
        <div style={style}>
          {/* æ¸²æŸ“æ–‡ä»¶èŠ‚ç‚¹ */}
        </div>
      )}
    />
  );
};
```

**é¢„æœŸæ•ˆæœ**:
- âœ… æ”¯æŒæ•°åƒä¸ªæ–‡ä»¶æµç•…æ¸²æŸ“
- âœ… é™ä½å†…å­˜å ç”¨
- âœ… æå‡é¦–å±åŠ è½½é€Ÿåº¦

**é¢„è®¡å·¥æ—¶**: 8å°æ—¶

#### 1.3 é”™è¯¯æç¤ºä¼˜åŒ– (P1)
**é—®é¢˜æè¿°**: Rust é”™è¯¯ä¿¡æ¯ç›´æ¥æ˜¾ç¤ºï¼Œç”¨æˆ·éš¾ä»¥ç†è§£

**è§£å†³æ–¹æ¡ˆ**:
```rust
// åˆ›å»ºé”™è¯¯æ˜ å°„è¡¨
const ERROR_MESSAGES: &[(ErrorCode, UserFriendlyMessage)] = &[
    (ErrorCode::FileNotFound, "æ–‡ä»¶æœªæ‰¾åˆ°ï¼Œè¯·æ£€æŸ¥è·¯å¾„æ˜¯å¦æ­£ç¡®"),
    (ErrorCode::PermissionDenied, "æƒé™ä¸è¶³ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æƒé™"),
    // ...
];

pub fn format_error(error: &CoworkError) -> String {
    ERROR_MESSAGES.iter()
        .find(|(code, _)| error.code() == *code)
        .map(|(_, msg)| msg.to_string())
        .unwrap_or_else(|| error.to_string())
}
```

**é¢„æœŸæ•ˆæœ**:
- âœ… ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
- âœ… æä¾›é”™è¯¯æ¢å¤å»ºè®®
- âœ… æ”¯æŒå¤šè¯­è¨€ï¼ˆæœªæ¥ï¼‰

**é¢„è®¡å·¥æ—¶**: 8å°æ—¶

#### 1.4 æ–‡ä»¶æœç´¢åŠŸèƒ½ (P1)
**é—®é¢˜æè¿°**: æ— æ³•åœ¨é¡¹ç›®ä¸­æœç´¢æ–‡ä»¶æˆ–ä»£ç 

**è§£å†³æ–¹æ¡ˆ**:
```jsx
// æ·»åŠ æœç´¢æ¡†å’Œå¿«æ·é”® Ctrl+P
const CodeEditor = () => {
  const [searchQuery, setSearchQuery] = useState('');
  const [searchResults, setSearchResults] = useState([]);

  const handleSearch = async (query) => {
    const results = await invoke('search_files', { query });
    setSearchResults(results);
  };

  return (
    <Modal open={showSearch}>
      <Input
        value={searchQuery}
        onChange={(e) => handleSearch(e.target.value)}
        placeholder="æœç´¢æ–‡ä»¶ (Ctrl+P)"
      />
      <List
        dataSource={searchResults}
        renderItem={(file) => (
          <List.Item onClick={() => openFile(file.path)}>
            {file.path} - {file.preview}
          </List.Item>
        )}
      />
    </Modal>
  );
};
```

**é¢„æœŸæ•ˆæœ**:
- âœ… å¿«é€Ÿæ–‡ä»¶æœç´¢ (Ctrl+P)
- âœ… ä»£ç å†…å®¹æœç´¢
- âœ… æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼
- âœ… æ˜¾ç¤ºåŒ¹é…è¡Œå·

**é¢„è®¡å·¥æ—¶**: 6å°æ—¶

**Phase 1 æ€»è®¡**: 30å°æ—¶ (çº¦4ä¸ªå·¥ä½œæ—¥)

---

### Phase 2: ä¸“ä¸šåˆ›ä½œç¯å¢ƒ (3-4å‘¨)

**ç›®æ ‡**: æä¾›ç±»ä¼¼ä¸“ä¸š IDE çš„å¼€å‘ä½“éªŒ

#### 2.1 ä»£ç æ ¼å¼åŒ–é›†æˆ (P1)
**åŠŸèƒ½æè¿°**: æ”¯æŒä»£ç è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œä¿æŒä»£ç é£æ ¼ä¸€è‡´

**æŠ€æœ¯æ–¹æ¡ˆ**:
```rust
// é›†æˆ Prettier (JavaScript/TypeScript)
#[tauri::command]
pub async fn format_file(file_path: String, language: String) -> Result<String, String> {
    let content = fs::read_to_string(&file_path)?;
    
    match language.as_str() {
        "javascript" | "typescript" => {
            // è°ƒç”¨ Prettier CLI
            let output = Command::new("prettier")
                .arg("--stdin-filepath")
                .arg(&file_path)
                .pipe(stdin)
                .output()?;
            Ok(String::from_utf8(output.stdout)?)
        },
        "rust" => {
            // è°ƒç”¨ rustfmt
            let output = Command::new("rustfmt")
                .stdin(Stdio::piped())
                .pipe(stdin)
                .output()?;
            Ok(String::from_utf8(output.stdout)?)
        },
        _ => Ok(content),
    }
}
```

**é¢„æœŸæ•ˆæœ**:
- âœ… æ”¯æŒ JavaScript/TypeScript æ ¼å¼åŒ–
- âœ… æ”¯æŒ Rust æ ¼å¼åŒ–
- âœ… æ”¯æŒä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–
- âœ… è‡ªå®šä¹‰æ ¼å¼åŒ–è§„åˆ™

**é¢„è®¡å·¥æ—¶**: 6å°æ—¶

#### 2.2 ä»£ç å¯¼èˆªåŠŸèƒ½ (P2)
**åŠŸèƒ½æè¿°**: æ”¯æŒå®šä¹‰è·³è½¬ã€å¼•ç”¨æŸ¥æ‰¾ã€ç¬¦å·æœç´¢

**æŠ€æœ¯æ–¹æ¡ˆ**:
```rust
// é›†æˆ rust-analyzer (Rust)
#[tauri::command]
pub async fn goto_definition(file_path: String, line: u32, column: u32) -> Result<Position, String> {
    let output = Command::new("rust-analyzer")
        .arg("gotoDefinition")
        .arg(&file_path)
        .arg(line.to_string())
        .arg(column.to_string())
        .output()?;
    
    let position: Position = serde_json::from_slice(&output.stdout)?;
    Ok(position)
}
```

**é¢„æœŸæ•ˆæœ**:
- âœ… F12 è·³è½¬åˆ°å®šä¹‰
- âœ… Shift+F12 æŸ¥æ‰¾å¼•ç”¨
- âœ… Ctrl+Shift+O ç¬¦å·æœç´¢
- âœ… æ”¯æŒ Rust å’Œ JavaScript/TypeScript

**é¢„è®¡å·¥æ—¶**: 8å°æ—¶

#### 2.3 Git é›†æˆ (P2)
**åŠŸèƒ½æè¿°**: æŸ¥çœ‹ Git Diffã€æäº¤ä»£ç ã€ç‰ˆæœ¬å†å²

**æŠ€æœ¯æ–¹æ¡ˆ**:
```rust
#[tauri::command]
pub async fn get_git_diff(file_path: String) -> Result<String, String> {
    let output = Command::new("git")
        .arg("diff")
        .arg(&file_path)
        .output()?;
    
    Ok(String::from_utf8(output.stdout)?)
}

#[tauri::command]
pub async fn git_commit(message: String) -> Result<(), String> {
    Command::new("git")
        .arg("add")
        .arg(".")
        .output()?;
    
    Command::new("git")
        .arg("commit")
        .arg("-m")
        .arg(&message)
        .output()?;
    
    Ok(())
}
```

**UI è®¾è®¡**:
```jsx
const GitPanel = () => {
  const [changes, setChanges] = useState([]);

  return (
    <div className="git-panel">
      <h3>Git Changes</h3>
      <List
        dataSource={changes}
        renderItem={(file) => (
          <List.Item>
            <div className="file-path">{file.path}</div>
            <DiffViewer oldText={file.oldContent} newText={file.newContent} />
          </List.Item>
        )}
      />
      <Button onClick={handleCommit}>Commit Changes</Button>
    </div>
  );
};
```

**é¢„æœŸæ•ˆæœ**:
- âœ… æŸ¥çœ‹ Git Diff
- âœ… æäº¤ä»£ç 
- âœ… æŸ¥çœ‹ç‰ˆæœ¬å†å²
- âœ… æ’¤é”€æ›´æ”¹

**é¢„è®¡å·¥æ—¶**: 12å°æ—¶

#### 2.4 é¡¹ç›®æ¨¡æ¿ç³»ç»Ÿ (P1)
**åŠŸèƒ½æè¿°**: æä¾›é¢„å®šä¹‰çš„é¡¹ç›®æ¨¡æ¿ï¼Œå¿«é€Ÿå¯åŠ¨é¡¹ç›®

**æŠ€æœ¯æ–¹æ¡ˆ**:
```toml
# æ¨¡æ¿é…ç½®
[[templates]]
name = "React + Vite"
description = "ç°ä»£åŒ–çš„ React å¼€å‘ç¯å¢ƒ"
language = "javascript"
files = [
    "src/App.jsx",
    "src/main.jsx",
    "package.json",
    "vite.config.js"
]

[[templates]]
name = "Rust CLI"
description = "å‘½ä»¤è¡Œå·¥å…·æ¨¡æ¿"
language = "rust"
files = [
    "src/main.rs",
    "Cargo.toml",
]
```

```rust
#[tauri::command]
pub async fn list_templates() -> Result<Vec<Template>, String> {
    let config = load_template_config()?;
    Ok(config.templates)
}

#[tauri::command]
pub async fn apply_template(template_name: String, session_id: String) -> Result<(), String> {
    let template = find_template(&template_name)?;
    
    // å¤åˆ¶æ¨¡æ¿æ–‡ä»¶åˆ°é¡¹ç›®ç›®å½•
    for file in &template.files {
        let src = format!("templates/{}/{}", template_name, file);
        let dst = format!("sessions/{}/code/{}", session_id, file);
        fs::copy(src, dst)?;
    }
    
    Ok(())
}
```

**é¢„æœŸæ•ˆæœ**:
- âœ… æä¾›å¤šç§é¡¹ç›®æ¨¡æ¿
- âœ… æ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿
- âœ… å¿«é€Ÿå¯åŠ¨æ–°é¡¹ç›®
- âœ… æ¨¡æ¿å¸‚åœºï¼ˆæœªæ¥ï¼‰

**é¢„è®¡å·¥æ—¶**: 12å°æ—¶

**Phase 2 æ€»è®¡**: 38å°æ—¶ (çº¦5ä¸ªå·¥ä½œæ—¥)

---

### Phase 3: åˆ›ä½œæµç¨‹å¯è§†åŒ– (2-3å‘¨)

**ç›®æ ‡**: è®©ç”¨æˆ·æ¸…æ™°äº†è§£ AI æ™ºèƒ½ä½“çš„å·¥ä½œè¿‡ç¨‹å’Œå†³ç­–ä¾æ®

#### 3.1 AI æ€è€ƒè¿‡ç¨‹å¯è§†åŒ– (P1)
**åŠŸèƒ½æè¿°**: å®æ—¶æ˜¾ç¤º AI æ™ºèƒ½ä½“çš„æ€è€ƒè¿‡ç¨‹å’Œå†³ç­–ä¾æ®

**æŠ€æœ¯æ–¹æ¡ˆ**:
```jsx
const AgentThinkingViewer = () => {
  const [thinkingLogs, setThinkingLogs] = useState([]);

  useEffect(() => {
    const unlisten = listen('agent_thinking', (event) => {
      const { agent, stage, content, confidence } = event.payload;
      setThinkingLogs(prev => [...prev, {
        agent,
        stage,
        content,
        confidence,
        timestamp: Date.now()
      }]);
    });
    return () => unlisten.then(f => f());
  }, []);

  return (
    <div className="thinking-viewer">
      <h3>AI æ€è€ƒè¿‡ç¨‹</h3>
      <Timeline>
        {thinkingLogs.map((log, idx) => (
          <Timeline.Item key={idx}>
            <div className="agent-name">{log.agent}</div>
            <div className="stage">{log.stage}</div>
            <div className="content">{log.content}</div>
            <div className="confidence">
              ç½®ä¿¡åº¦: {(log.confidence * 100).toFixed(0)}%
            </div>
          </Timeline.Item>
        ))}
      </Timeline>
    </div>
  );
};
```

**é¢„æœŸæ•ˆæœ**:
- âœ… å®æ—¶æ˜¾ç¤º AI æ€è€ƒè¿‡ç¨‹
- âœ… æ˜¾ç¤ºå†³ç­–ç½®ä¿¡åº¦
- âœ… æ”¯æŒå±•å¼€/æŠ˜å è¯¦ç»†ä¿¡æ¯
- âœ… æ—¶é—´çº¿è§†å›¾

**é¢„è®¡å·¥æ—¶**: 10å°æ—¶

#### 3.2 é˜¶æ®µè¿›åº¦å¯è§†åŒ– (P1)
**åŠŸèƒ½æè¿°**: å¯è§†åŒ–æ˜¾ç¤ºå½“å‰é¡¹ç›®æ‰€å¤„çš„é˜¶æ®µå’Œè¿›åº¦

**æŠ€æœ¯æ–¹æ¡ˆ**:
```jsx
const StageProgress = ({ currentStage, stages }) => {
  return (
    <div className="stage-progress">
      <Steps current={currentStage}>
        {stages.map((stage, idx) => (
          <Step
            key={idx}
            title={stage.name}
            description={stage.description}
            status={getStageStatus(stage)}
          />
        ))}
      </Steps>
      <Progress percent={calculateProgress()} />
    </div>
  );
};
```

**é¢„æœŸæ•ˆæœ**:
- âœ… æ˜¾ç¤ºå½“å‰é¡¹ç›®æ‰€å¤„é˜¶æ®µ
- âœ… æ˜¾ç¤ºå„é˜¶æ®µå®ŒæˆçŠ¶æ€
- âœ… æ˜¾ç¤ºæ•´ä½“è¿›åº¦ç™¾åˆ†æ¯”
- âœ… æ”¯æŒç‚¹å‡»è·³è½¬åˆ°æŒ‡å®šé˜¶æ®µ

**é¢„è®¡å·¥æ—¶**: 6å°æ—¶

#### 3.3 å†³ç­–å†å²è®°å½• (P2)
**åŠŸèƒ½æè¿°**: è®°å½•æ‰€æœ‰å…³é”®å†³ç­–ç‚¹ï¼Œæ”¯æŒå›æº¯å’Œå®¡è®¡

**æŠ€æœ¯æ–¹æ¡ˆ**:
```rust
#[derive(Serialize, Deserialize)]
pub struct DecisionRecord {
    pub timestamp: DateTime<Utc>,
    pub session_id: String,
    pub stage: String,
    pub agent: String,
    pub decision_type: DecisionType,
    pub input: String,
    pub output: String,
    pub rationale: String,
    pub user_feedback: Option<String>,
}

#[tauri::command]
pub async fn get_decision_history(session_id: String) -> Result<Vec<DecisionRecord>, String> {
    let session_dir = get_session_dir(&session_id)?;
    let history_file = session_dir.join("decision_history.json");
    
    if history_file.exists() {
        let content = fs::read_to_string(history_file)?;
        let history: Vec<DecisionRecord> = serde_json::from_str(&content)?;
        Ok(history)
    } else {
        Ok(vec![])
    }
}
```

**UI è®¾è®¡**:
```jsx
const DecisionHistory = ({ sessionId }) => {
  const [history, setHistory] = useState([]);

  useEffect(() => {
    invoke('get_decision_history', { sessionId }).then(setHistory);
  }, [sessionId]);

  return (
    <div className="decision-history">
      <h3>å†³ç­–å†å²</h3>
      <Timeline>
        {history.map((record, idx) => (
          <Timeline.Item key={idx}>
            <div className="timestamp">{record.timestamp}</div>
            <div className="stage">{record.stage} - {record.agent}</div>
            <div className="decision-type">{record.decision_type}</div>
            <div className="input">è¾“å…¥: {record.input}</div>
            <div className="output">è¾“å‡º: {record.output}</div>
            <div className="rationale">ä¾æ®: {record.rationale}</div>
            {record.user_feedback && (
              <div className="feedback">ç”¨æˆ·åé¦ˆ: {record.user_feedback}</div>
            )}
          </Timeline.Item>
        ))}
      </Timeline>
    </div>
  );
};
```

**é¢„æœŸæ•ˆæœ**:
- âœ… è®°å½•æ‰€æœ‰å…³é”®å†³ç­–
- âœ… æ˜¾ç¤ºå†³ç­–ä¾æ®
- âœ… æ˜¾ç¤ºç”¨æˆ·åé¦ˆ
- âœ… æ”¯æŒå¯¼å‡ºå†³ç­–å†å²

**é¢„è®¡å·¥æ—¶**: 8å°æ—¶

**Phase 3 æ€»è®¡**: 24å°æ—¶ (çº¦3ä¸ªå·¥ä½œæ—¥)

---

### Phase 4: å¤šé¡¹ç›®ç®¡ç† (2-3å‘¨)

**ç›®æ ‡**: æ”¯æŒå¤šé¡¹ç›®å¹¶è¡Œç®¡ç†ï¼Œæ»¡è¶³å¤šåœºæ™¯å¼€å‘éœ€æ±‚

#### 4.1 é¡¹ç›®å·¥ä½œåŒº (P1)
**åŠŸèƒ½æè¿°**: æ”¯æŒå¤šé¡¹ç›®å·¥ä½œåŒºï¼Œå¿«é€Ÿåˆ‡æ¢é¡¹ç›®

**æŠ€æœ¯æ–¹æ¡ˆ**:
```jsx
const Workspace = () => {
  const [projects, setProjects] = useState([]);
  const [activeProject, setActiveProject] = useState(null);

  return (
    <div className="workspace">
      <div className="project-selector">
        <Select
          value={activeProject}
          onChange={setActiveProject}
          options={projects.map(p => ({ label: p.name, value: p.id }))}
        />
        <Button onClick={handleCreateProject}>æ–°å»ºé¡¹ç›®</Button>
      </div>
      <div className="project-content">
        {activeProject && <ProjectView projectId={activeProject} />}
      </div>
    </div>
  );
};
```

**é¢„æœŸæ•ˆæœ**:
- âœ… æ”¯æŒå¤šé¡¹ç›®å·¥ä½œåŒº
- âœ… å¿«é€Ÿåˆ‡æ¢é¡¹ç›®
- âœ… é¡¹ç›®çŠ¶æ€ç‹¬ç«‹
- âœ… æ”¯æŒé¡¹ç›®æ ‡ç­¾å’Œåˆ†ç»„

**é¢„è®¡å·¥æ—¶**: 8å°æ—¶

#### 4.2 é¡¹ç›®å¯¼å…¥/å¯¼å‡º (P2)
**åŠŸèƒ½æè¿°**: æ”¯æŒå¯¼å…¥ç°æœ‰é¡¹ç›®ï¼Œå¯¼å‡ºé¡¹ç›®é…ç½®

**æŠ€æœ¯æ–¹æ¡ˆ**:
```rust
#[tauri::command]
pub async fn export_project(session_id: String, export_path: String) -> Result<(), String> {
    // æ‰“åŒ…é¡¹ç›®æ–‡ä»¶
    let session_dir = get_session_dir(&session_id)?;
    let archive = File::create(&export_path)?;
    let mut zip = ZipWriter::new(archive);
    
    // æ·»åŠ æ‰€æœ‰æ–‡ä»¶åˆ° zip
    for entry in WalkDir::new(&session_dir) {
        let entry = entry?;
        let path = entry.path();
        let relative = path.strip_prefix(&session_dir)?;
        
        if path.is_file() {
            zip.start_file(relative.to_str().unwrap(), FileOptions::default())?;
            let mut file = File::open(path)?;
            let mut buffer = Vec::new();
            file.read_to_end(&mut buffer)?;
            zip.write_all(&buffer)?;
        }
    }
    
    zip.finish()?;
    Ok(())
}

#[tauri::command]
pub async fn import_project(archive_path: String) -> Result<String, String> {
    // è§£å‹é¡¹ç›®æ–‡ä»¶
    let file = File::open(&archive_path)?;
    let mut archive = ZipArchive::new(file)?;
    
    let session_id = format!("session-{}", chrono::Utc::now().timestamp());
    let session_dir = get_session_dir(&session_id)?;
    fs::create_dir_all(&session_dir)?;
    
    for i in 0..archive.len() {
        let mut file = archive.by_index(i)?;
        let out_path = session_dir.join(file.name());
        if file.name().ends_with('/') {
            fs::create_dir_all(&out_path)?;
        } else {
            let mut out_file = File::create(&out_path)?;
            std::io::copy(&mut file, &mut out_file)?;
        }
    }
    
    Ok(session_id)
}
```

**é¢„æœŸæ•ˆæœ**:
- âœ… å¯¼å‡ºé¡¹ç›®ä¸º zip æ–‡ä»¶
- âœ… å¯¼å…¥é¡¹ç›®
- âœ… ä¿ç•™æ‰€æœ‰é…ç½®å’Œå†å²
- âœ… æ”¯æŒé¡¹ç›®åˆ†äº«

**é¢„è®¡å·¥æ—¶**: 10å°æ—¶

#### 4.3 é¡¹ç›®é…ç½®ç®¡ç† (P2)
**åŠŸèƒ½æè¿°**: é›†ä¸­ç®¡ç†é¡¹ç›®é…ç½®ï¼Œæ”¯æŒç¯å¢ƒå˜é‡ã€æ„å»ºè„šæœ¬ç­‰

**æŠ€æœ¯æ–¹æ¡ˆ**:
```rust
#[derive(Serialize, Deserialize)]
pub struct ProjectConfig {
    pub name: String,
    pub description: String,
    pub language: String,
    pub build_command: String,
    pub test_command: String,
    pub environment_variables: HashMap<String, String>,
    pub dependencies: Vec<String>,
}

#[tauri::command]
pub async fn get_project_config(session_id: String) -> Result<ProjectConfig, String> {
    let config_path = get_session_dir(&session_id)?.join("project_config.json");
    let content = fs::read_to_string(config_path)?;
    let config: ProjectConfig = serde_json::from_str(&content)?;
    Ok(config)
}

#[tauri::command]
pub async fn save_project_config(session_id: String, config: ProjectConfig) -> Result<(), String> {
    let config_path = get_session_dir(&session_id)?.join("project_config.json");
    let content = serde_json::to_string_pretty(&config)?;
    fs::write(config_path, content)?;
    Ok(())
}
```

**UI è®¾è®¡**:
```jsx
const ProjectConfigPanel = ({ sessionId }) => {
  const [config, setConfig] = useState(null);

  useEffect(() => {
    invoke('get_project_config', { sessionId }).then(setConfig);
  }, [sessionId]);

  return (
    <div className="config-panel">
      <h3>é¡¹ç›®é…ç½®</h3>
      <Form
        layout="vertical"
        initialValues={config}
        onFinish={handleSaveConfig}
      >
        <Form.Item name="name" label="é¡¹ç›®åç§°">
          <Input />
        </Form.Item>
        <Form.Item name="description" label="é¡¹ç›®æè¿°">
          <Input.TextArea />
        </Form.Item>
        <Form.Item name="build_command" label="æ„å»ºå‘½ä»¤">
          <Input />
        </Form.Item>
        <Form.Item name="test_command" label="æµ‹è¯•å‘½ä»¤">
          <Input />
        </Form.Item>
        <Form.Item name="environment_variables" label="ç¯å¢ƒå˜é‡">
          <Input.TextArea placeholder='{"KEY": "VALUE"}' />
        </Form.Item>
        <Button type="primary" htmlType="submit">ä¿å­˜é…ç½®</Button>
      </Form>
    </div>
  );
};
```

**é¢„æœŸæ•ˆæœ**:
- âœ… é›†ä¸­ç®¡ç†é¡¹ç›®é…ç½®
- âœ… æ”¯æŒç¯å¢ƒå˜é‡
- âœ… æ”¯æŒè‡ªå®šä¹‰æ„å»ºå’Œæµ‹è¯•å‘½ä»¤
- âœ… é…ç½®ç‰ˆæœ¬ç®¡ç†

**é¢„è®¡å·¥æ—¶**: 8å°æ—¶

**Phase 4 æ€»è®¡**: 26å°æ—¶ (çº¦3ä¸ªå·¥ä½œæ—¥)

---

### Phase 5: é«˜çº§åŠŸèƒ½ (3-4å‘¨)

**ç›®æ ‡**: æä¾›é«˜çº§åŠŸèƒ½ï¼Œæ»¡è¶³ä¸“ä¸šç”¨æˆ·éœ€æ±‚

#### 5.1 æ’ä»¶ç³»ç»Ÿ (P2)
**åŠŸèƒ½æè¿°**: æ”¯æŒè‡ªå®šä¹‰æ’ä»¶ï¼Œæ‰©å±•åŠŸèƒ½

**æŠ€æœ¯æ–¹æ¡ˆ**:
```rust
pub trait Plugin: Send + Sync {
    fn name(&self) -> &str;
    fn version(&self) -> &str;
    fn on_init(&self, context: &PluginContext) -> Result<(), Error>;
    fn on_event(&self, event: &Event, context: &PluginContext) -> Result<(), Error>;
    fn on_destroy(&self, context: &PluginContext) -> Result<(), Error>;
}

pub struct PluginManager {
    plugins: Vec<Box<dyn Plugin>>,
}

impl PluginManager {
    pub fn load_plugin(&mut self, path: &Path) -> Result<(), Error> {
        // åŠ è½½åŠ¨æ€åº“
        let lib = unsafe { libloading::Library::new(path)? };
        
        // åŠ è½½æ’ä»¶ç¬¦å·
        let create_plugin: libloading::Symbol<unsafe fn() -> *mut dyn Plugin> =
            unsafe { lib.get(b"create_plugin")? };
        
        let plugin = unsafe { Box::from_raw(create_plugin()) };
        self.plugins.push(plugin);
        
        Ok(())
    }
}
```

**æ’ä»¶ç¤ºä¾‹**:
```rust
// è‡ªå®šä¹‰ä»£ç æ ¼å¼åŒ–æ’ä»¶
pub struct CustomFormatterPlugin;

impl Plugin for CustomFormatterPlugin {
    fn name(&self) -> &str {
        "custom_formatter"
    }
    
    fn version(&self) -> &str {
        "1.0.0"
    }
    
    fn on_event(&self, event: &Event, context: &PluginContext) -> Result<(), Error> {
        match event {
            Event::FileSaved { path, content } => {
                // è‡ªå®šä¹‰æ ¼å¼åŒ–é€»è¾‘
                let formatted = self.format(content);
                context.save_file(path, formatted)?;
            }
            _ => {}
        }
        Ok(())
    }
}
```

**é¢„æœŸæ•ˆæœ**:
- âœ… æ”¯æŒåŠ¨æ€åŠ è½½æ’ä»¶
- âœ… æ’ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†
- âœ… æ’ä»¶å¸‚åœºï¼ˆæœªæ¥ï¼‰
- âœ… æ’ä»¶å¼€å‘è€…æ–‡æ¡£

**é¢„è®¡å·¥æ—¶**: 20å°æ—¶

#### 5.2 å¤šä¸»é¢˜æ”¯æŒ (P2)
**åŠŸèƒ½æè¿°**: æ”¯æŒå¤šç§ä¸»é¢˜ï¼Œæ»¡è¶³ç”¨æˆ·ä¸ªæ€§åŒ–éœ€æ±‚

**æŠ€æœ¯æ–¹æ¡ˆ**:
```jsx
// ä½¿ç”¨ CSS Variables å®ç°ä¸»é¢˜åˆ‡æ¢
const themes = {
  dark: {
    '--bg-color': '#1f1f1f',
    '--text-color': '#ffffff',
    '--primary-color': '#1890ff',
    '--border-color': '#303030',
  },
  light: {
    '--bg-color': '#ffffff',
    '--text-color': '#000000',
    '--primary-color': '#1890ff',
    '--border-color': '#e0e0e0',
  },
  monokai: {
    '--bg-color': '#272822',
    '--text-color': '#f8f8f2',
    '--primary-color': '#a6e22e',
    '--border-color': '#3e3d32',
  },
};

const ThemeProvider = ({ children }) => {
  const [theme, setTheme] = useState('dark');
  
  return (
    <div style={themes[theme]}>
      {children}
      <Select value={theme} onChange={setTheme}>
        <Select.Option value="dark">Dark</Select.Option>
        <Select.Option value="light">Light</Select.Option>
        <Select.Option value="monokai">Monokai</Select.Option>
      </Select>
    </div>
  );
};
```

**é¢„æœŸæ•ˆæœ**:
- âœ… æ”¯æŒå¤šç§å†…ç½®ä¸»é¢˜
- âœ… æ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜
- âœ… ä¸»é¢˜å®æ—¶åˆ‡æ¢
- âœ… ä¸»é¢˜æŒä¹…åŒ–

**é¢„è®¡å·¥æ—¶**: 6å°æ—¶

#### 5.3 å¿«æ·é”®ç³»ç»Ÿ (P2)
**åŠŸèƒ½æè¿°**: æ”¯æŒè‡ªå®šä¹‰å¿«æ·é”®ï¼Œæé«˜æ“ä½œæ•ˆç‡

**æŠ€æœ¯æ–¹æ¡ˆ**:
```jsx
import { HotKeys } from 'react-hotkeys';

const keyMap = {
  SAVE_FILE: 'ctrl+s',
  OPEN_FILE: 'ctrl+p',
  GOTO_DEFINITION: 'f12',
  FIND_REFERENCES: 'shift+f12',
  COMMAND_PALETTE: 'ctrl+shift+p',
};

const handlers = {
  SAVE_FILE: (event) => {
    event.preventDefault();
    saveFile();
  },
  OPEN_FILE: (event) => {
    event.preventDefault();
    showFileSearch();
  },
  GOTO_DEFINITION: (event) => {
    event.preventDefault();
    gotoDefinition();
  },
  FIND_REFERENCES: (event) => {
    event.preventDefault();
    findReferences();
  },
  COMMAND_PALETTE: (event) => {
    event.preventDefault();
    showCommandPalette();
  },
};

const App = () => {
  return (
    <HotKeys keyMap={keyMap} handlers={handlers}>
      <div className="app">
        {/* åº”ç”¨å†…å®¹ */}
      </div>
    </HotKeys>
  );
};
```

**é¢„æœŸæ•ˆæœ**:
- âœ… æ”¯æŒå¸¸ç”¨å¿«æ·é”®
- âœ… æ”¯æŒè‡ªå®šä¹‰å¿«æ·é”®
- âœ… å¿«æ·é”®æç¤º
- âœ… å¿«æ·é”®å†²çªæ£€æµ‹

**é¢„è®¡å·¥æ—¶**: 8å°æ—¶

#### 5.4 å‘½ä»¤é¢æ¿ (P1)
**åŠŸèƒ½æè¿°**: æä¾›ç»Ÿä¸€çš„å‘½ä»¤é¢æ¿ï¼Œå¿«é€Ÿæ‰§è¡Œå„ç§æ“ä½œ

**æŠ€æœ¯æ–¹æ¡ˆ**:
```jsx
const CommandPalette = () => {
  const [visible, setVisible] = useState(false);
  const [query, setQuery] = useState('');
  
  const commands = [
    { id: 'create-project', label: 'åˆ›å»ºæ–°é¡¹ç›®', action: () => createProject() },
    { id: 'open-settings', label: 'æ‰“å¼€è®¾ç½®', action: () => openSettings() },
    { id: 'toggle-sidebar', label: 'åˆ‡æ¢ä¾§è¾¹æ ', action: () => toggleSidebar() },
    { id: 'run-project', label: 'è¿è¡Œé¡¹ç›®', action: () => runProject() },
    { id: 'build-project', label: 'æ„å»ºé¡¹ç›®', action: () => buildProject() },
    // ...
  ];

  const filteredCommands = commands.filter(cmd =>
    cmd.label.toLowerCase().includes(query.toLowerCase())
  );

  return (
    <Modal
      visible={visible}
      onCancel={() => setVisible(false)}
      footer={null}
      title="å‘½ä»¤é¢æ¿"
    >
      <Input
        value={query}
        onChange={(e) => setQuery(e.target.value)}
        placeholder="è¾“å…¥å‘½ä»¤ (Ctrl+Shift+P)"
        autoFocus
      />
      <List
        dataSource={filteredCommands}
        renderItem={(cmd) => (
          <List.Item onClick={() => { cmd.action(); setVisible(false); }}>
            {cmd.label}
          </List.Item>
        )}
      />
    </Modal>
  );
};
```

**é¢„æœŸæ•ˆæœ**:
- âœ… ç»Ÿä¸€çš„å‘½ä»¤é¢æ¿
- âœ… å¿«é€Ÿæœç´¢å’Œæ‰§è¡Œå‘½ä»¤
- âœ… æ”¯æŒå‘½ä»¤åˆ†ç±»
- âœ… æ”¯æŒè‡ªå®šä¹‰å‘½ä»¤

**é¢„è®¡å·¥æ—¶**: 6å°æ—¶

**Phase 5 æ€»è®¡**: 40å°æ—¶ (çº¦5ä¸ªå·¥ä½œæ—¥)

---

## ğŸ“… å®æ–½æ—¶é—´è¡¨

### æ€»ä½“è§„åˆ’

| é˜¶æ®µ | ç›®æ ‡ | å·¥ä½œé‡ | å¼€å§‹æ—¶é—´ | ç»“æŸæ—¶é—´ |
|------|------|--------|---------|---------|
| **Phase 1** | æ ¸å¿ƒä½“éªŒä¼˜åŒ– | 30h | Week 1 | Week 1.5 |
| **Phase 2** | ä¸“ä¸šåˆ›ä½œç¯å¢ƒ | 38h | Week 2 | Week 3 |
| **Phase 3** | åˆ›ä½œæµç¨‹å¯è§†åŒ– | 24h | Week 4 | Week 4.5 |
| **Phase 4** | å¤šé¡¹ç›®ç®¡ç† | 26h | Week 5 | Week 5.5 |
| **Phase 5** | é«˜çº§åŠŸèƒ½ | 40h | Week 6 | Week 7.5 |
| **æ€»è®¡** | **å…¨é¢å‡çº§** | **158h** | **Week 1** | **Week 8** |

### ç”˜ç‰¹å›¾

```
Week 1   Week 2   Week 3   Week 4   Week 5   Week 6   Week 7   Week 8
|--------|--------|--------|--------|--------|--------|--------|--------|
Phase 1: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
         Phase 2:         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
                          Phase 3:               â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
                                    Phase 4:               â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
                                               Phase 5:                      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
```

### é‡Œç¨‹ç¢‘

| é‡Œç¨‹ç¢‘ | æè¿° | æ—¶é—´ç‚¹ | éªŒæ”¶æ ‡å‡† |
|--------|------|--------|---------|
| **M1** | æ ¸å¿ƒä½“éªŒä¼˜åŒ–å®Œæˆ | Week 1.5 | å®æ—¶æ—¥å¿—æµã€è™šæ‹Ÿæ»šåŠ¨ã€é”™è¯¯æç¤ºä¼˜åŒ–ã€æ–‡ä»¶æœç´¢ |
| **M2** | ä¸“ä¸šåˆ›ä½œç¯å¢ƒå®Œæˆ | Week 3 | ä»£ç æ ¼å¼åŒ–ã€ä»£ç å¯¼èˆªã€Git é›†æˆã€é¡¹ç›®æ¨¡æ¿ |
| **M3** | åˆ›ä½œæµç¨‹å¯è§†åŒ–å®Œæˆ | Week 4.5 | AI æ€è€ƒè¿‡ç¨‹å¯è§†åŒ–ã€é˜¶æ®µè¿›åº¦å¯è§†åŒ–ã€å†³ç­–å†å²è®°å½• |
| **M4** | å¤šé¡¹ç›®ç®¡ç†å®Œæˆ | Week 5.5 | é¡¹ç›®å·¥ä½œåŒºã€é¡¹ç›®å¯¼å…¥/å¯¼å‡ºã€é¡¹ç›®é…ç½®ç®¡ç† |
| **M5** | é«˜çº§åŠŸèƒ½å®Œæˆ | Week 7.5 | æ’ä»¶ç³»ç»Ÿã€å¤šä¸»é¢˜æ”¯æŒã€å¿«æ·é”®ç³»ç»Ÿã€å‘½ä»¤é¢æ¿ |

---

## ğŸ¨ UI/UX è®¾è®¡è§„èŒƒ

### è®¾è®¡åŸåˆ™

1. **ç®€çº¦ä¼˜å…ˆ**: ç•Œé¢ç®€æ´ï¼Œé¿å…è¿‡åº¦è®¾è®¡
2. **ä¸€è‡´æ€§**: ä¿æŒè§†è§‰å’Œäº¤äº’çš„ä¸€è‡´æ€§
3. **å¯è®¿é—®æ€§**: æ”¯æŒé”®ç›˜å¯¼èˆªï¼Œæ»¡è¶³æ— éšœç¢éœ€æ±‚
4. **å“åº”å¼**: é€‚é…ä¸åŒå±å¹•å°ºå¯¸
5. **æ€§èƒ½ä¼˜å…ˆ**: æµç•…çš„åŠ¨ç”»å’Œäº¤äº’

### é¢œè‰²è§„èŒƒ

```css
/* Dark Theme (é»˜è®¤) */
--bg-primary: #1f1f1f;
--bg-secondary: #2a2a2a;
--bg-tertiary: #3a3a3a;
--text-primary: #ffffff;
--text-secondary: #b0b0b0;
--border-color: #404040;
--accent-color: #1890ff;
--success-color: #52c41a;
--warning-color: #faad14;
--error-color: #ff4d4f;

/* Light Theme */
--bg-primary: #ffffff;
--bg-secondary: #f5f5f5;
--bg-tertiary: #e8e8e8;
--text-primary: #000000;
--text-secondary: #666666;
--border-color: #d9d9d9;
```

### å­—ä½“è§„èŒƒ

```css
/* æ ‡é¢˜ */
font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
font-weight: 600;
font-size: 18px;

/* æ­£æ–‡ */
font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
font-weight: 400;
font-size: 14px;

/* ä»£ç  */
font-family: 'Fira Code', 'JetBrains Mono', 'Consolas', monospace;
font-size: 13px;
```

### é—´è·è§„èŒƒ

```css
--spacing-xs: 4px;
--spacing-sm: 8px;
--spacing-md: 16px;
--spacing-lg: 24px;
--spacing-xl: 32px;
--spacing-xxl: 48px;
```

### åœ†è§’è§„èŒƒ

```css
--radius-sm: 4px;
--radius-md: 8px;
--radius-lg: 12px;
--radius-xl: 16px;
```

### é˜´å½±è§„èŒƒ

```css
--shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
--shadow-md: 0 4px 8px rgba(0, 0, 0, 0.15);
--shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.2);
```

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### æµ‹è¯•è¦†ç›–ç›®æ ‡

| æµ‹è¯•ç±»å‹ | è¦†ç›–ç‡ç›®æ ‡ | è¯´æ˜ |
|---------|-----------|------|
| **å•å…ƒæµ‹è¯•** | 70% | æ ¸å¿ƒé€»è¾‘å’Œå·¥å…·å‡½æ•° |
| **é›†æˆæµ‹è¯•** | 50% | ç»„ä»¶é—´äº¤äº’ |
| **E2E æµ‹è¯•** | 30% | å…³é”®ç”¨æˆ·æµç¨‹ |
| **æ€§èƒ½æµ‹è¯•** | 100% | å…³é”®æ€§èƒ½æŒ‡æ ‡ |

### æµ‹è¯•å·¥å…·

| ç±»å‹ | å·¥å…· | ç”¨é€” |
|------|------|------|
| **å•å…ƒæµ‹è¯•** | Jest (å‰ç«¯) | ç»„ä»¶æµ‹è¯• |
| | cargo test (åç«¯) | Rust ä»£ç æµ‹è¯• |
| **é›†æˆæµ‹è¯•** | Testing Library | ç»„ä»¶é›†æˆæµ‹è¯• |
| | Tauri Test | Tauri å‘½ä»¤æµ‹è¯• |
| **E2E æµ‹è¯•** | Playwright | ç«¯åˆ°ç«¯æµ‹è¯• |
| **æ€§èƒ½æµ‹è¯•** | Lighthouse | å‰ç«¯æ€§èƒ½ |
| | criterion (Rust) | åç«¯æ€§èƒ½ |

### å…³é”®æµ‹è¯•åœºæ™¯

1. **åˆ›å»ºé¡¹ç›®æµç¨‹**
   - è¾“å…¥åˆ›æ„ â†’ åˆ›å»ºé¡¹ç›® â†’ æŸ¥çœ‹ä¼šè¯ â†’ éªŒè¯å·¥ä»¶ç”Ÿæˆ

2. **æ¢å¤ä¼šè¯æµç¨‹**
   - é€‰æ‹©å·²å®Œæˆä¼šè¯ â†’ æ¢å¤ â†’ æ–°ä¼šè¯åˆ›å»º â†’ éªŒè¯çŠ¶æ€ç»§æ‰¿

3. **ä¿®æ”¹é¡¹ç›®æµç¨‹**
   - é€‰æ‹©åŸºç¡€ä¼šè¯ â†’ è¾“å…¥ä¿®æ”¹éœ€æ±‚ â†’ æ‰§è¡Œä¿®æ”¹ â†’ éªŒè¯ä»£ç å˜æ›´

4. **å®æ—¶æ—¥å¿—æµ**
   - å¯åŠ¨é¡¹ç›® â†’ æŸ¥çœ‹å®æ—¶æ—¥å¿— â†’ éªŒè¯æ—¥å¿—å®Œæ•´æ€§

5. **æ–‡ä»¶æœç´¢**
   - æ‰“å¼€æœç´¢æ¡† â†’ è¾“å…¥å…³é”®è¯ â†’ éªŒè¯æœç´¢ç»“æœ â†’ æ‰“å¼€æ–‡ä»¶

6. **ä»£ç æ ¼å¼åŒ–**
   - ç¼–è¾‘ä»£ç  â†’ è§¦å‘æ ¼å¼åŒ– â†’ éªŒè¯æ ¼å¼åŒ–ç»“æœ

7. **Git æ“ä½œ**
   - ä¿®æ”¹æ–‡ä»¶ â†’ æŸ¥çœ‹ Diff â†’ æäº¤ä»£ç  â†’ éªŒè¯æäº¤æˆåŠŸ

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### æ€§èƒ½ç›®æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å½“å‰å€¼ | è¯´æ˜ |
|------|--------|--------|------|
| **é¦–å±åŠ è½½æ—¶é—´** | < 2s | 1.5s | åº”ç”¨å¯åŠ¨æ—¶é—´ |
| **æ–‡ä»¶æ ‘æ¸²æŸ“** | < 100ms (1000 files) | 200ms | å¤§é¡¹ç›®æ€§èƒ½ |
| **ä»£ç ç¼–è¾‘å™¨åŠ è½½** | < 500ms | 400ms | Monaco Editor |
| **é¢„è§ˆå¯åŠ¨æ—¶é—´** | < 3s | 2.5s | é¢„è§ˆæœåŠ¡å™¨ |
| **æ—¥å¿—æ¨é€å»¶è¿Ÿ** | < 100ms | N/A | å®æ—¶æ—¥å¿—æµ |
| **å†…å­˜å ç”¨** | < 500MB | 450MB | è¿è¡Œæ—¶å†…å­˜ |
| **åŒ…ä½“ç§¯** | < 100MB | 80MB | å®‰è£…åŒ…å¤§å° |

### æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

1. **å‰ç«¯ä¼˜åŒ–**
   - ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
   - è™šæ‹Ÿæ»šåŠ¨
   - å›¾ç‰‡å’Œèµ„æºå‹ç¼©
   - ç¼“å­˜ç­–ç•¥

2. **åç«¯ä¼˜åŒ–**
   - å¼‚æ­¥å¤„ç†
   - è¿æ¥æ± 
   - æ‰¹é‡æ“ä½œ
   - å†…å­˜ä¼˜åŒ–

3. **ç½‘ç»œä¼˜åŒ–**
   - WebSocket é•¿è¿æ¥
   - äº‹ä»¶å‹ç¼©
   - å¢é‡æ›´æ–°

---

## ğŸ” å®‰å…¨è€ƒè™‘

### å®‰å…¨ç­–ç•¥

1. **æ–‡ä»¶ç³»ç»Ÿå®‰å…¨**
   - è·¯å¾„éå†é˜²æŠ¤
   - è®¿é—®æƒé™æ£€æŸ¥
   - æ–‡ä»¶ç±»å‹éªŒè¯

2. **å‘½ä»¤æ‰§è¡Œå®‰å…¨**
   - å‘½ä»¤ç™½åå•
   - å‚æ•°éªŒè¯
   - è¶…æ—¶æ§åˆ¶

3. **æ•°æ®å®‰å…¨**
   - æ•æ„Ÿæ•°æ®åŠ å¯†
   - æœ¬åœ°å­˜å‚¨ä¿æŠ¤
   - æ—¥å¿—è„±æ•

4. **ç½‘ç»œå®‰å…¨**
   - é¢„è§ˆæœåŠ¡å™¨éš”ç¦»
   - ç«¯å£ç®¡ç†
   - è®¿é—®æ§åˆ¶

### å®‰å…¨æµ‹è¯•

- âœ… è·¯å¾„éå†æµ‹è¯•
- âœ… å‘½ä»¤æ³¨å…¥æµ‹è¯•
- âœ… XSS é˜²æŠ¤æµ‹è¯•
- âœ… CSRF é˜²æŠ¤æµ‹è¯•
- âœ… æ–‡ä»¶ä¸Šä¼ æµ‹è¯•

---

## ğŸ“š æ–‡æ¡£è®¡åˆ’

### æ–‡æ¡£ç±»å‹

| æ–‡æ¡£ç±»å‹ | ç›®æ ‡ | å†…å®¹ |
|---------|------|------|
| **ç”¨æˆ·æ–‡æ¡£** | å¸®åŠ©ç”¨æˆ·å¿«é€Ÿä¸Šæ‰‹ | å¿«é€Ÿå¼€å§‹ã€åŠŸèƒ½ä»‹ç»ã€å¸¸è§é—®é¢˜ |
| **å¼€å‘æ–‡æ¡£** | æŒ‡å¯¼å¼€å‘è€…è´¡çŒ®ä»£ç  | æ¶æ„è¯´æ˜ã€API æ–‡æ¡£ã€å¼€å‘æŒ‡å— |
| **æ’ä»¶æ–‡æ¡£** | æŒ‡å¯¼æ’ä»¶å¼€å‘ | æ’ä»¶ APIã€æ’ä»¶ç¤ºä¾‹ã€æœ€ä½³å®è·µ |
| **API æ–‡æ¡£** | æè¿°æ‰€æœ‰ API æ¥å£ | å‘½ä»¤åˆ—è¡¨ã€äº‹ä»¶åˆ—è¡¨ã€æ•°æ®ç±»å‹ |

### æ–‡æ¡£å·¥å…·

- **ç”¨æˆ·æ–‡æ¡£**: Docusaurus
- **å¼€å‘æ–‡æ¡£**: rustdoc (Rust) + JSDoc (JavaScript)
- **API æ–‡æ¡£**: OpenAPI Specification

---

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

### ç”¨æˆ·ä½“éªŒæŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹æ³• |
|------|--------|---------|
| **ä»»åŠ¡å®Œæˆç‡** | > 90% | ç”¨æˆ·è°ƒç ” |
| **ç”¨æˆ·æ»¡æ„åº¦** | > 4.0/5.0 | ç”¨æˆ·é—®å· |
| **å­¦ä¹ æ›²çº¿** | < 30min | æ–°ç”¨æˆ·æµ‹è¯• |
| **é”™è¯¯ç‡** | < 5% | é”™è¯¯æ—¥å¿—åˆ†æ |

### æŠ€æœ¯æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹æ³• |
|------|--------|---------|
| **æµ‹è¯•è¦†ç›–ç‡** | > 70% | æµ‹è¯•å·¥å…· |
| **æ€§èƒ½è¾¾æ ‡ç‡** | 100% | æ€§èƒ½æµ‹è¯• |
| **ä»£ç è´¨é‡** | A çº§ | SonarQube |
| **å®‰å…¨æ¼æ´** | 0 | å®‰å…¨æ‰«æ |

### ä¸šåŠ¡æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹æ³• |
|------|--------|---------|
| **æ—¥æ´»è·ƒç”¨æˆ·** | > 1000 | ä½¿ç”¨ç»Ÿè®¡ |
| **é¡¹ç›®åˆ›å»ºæ•°** | > 5000/æœˆ | ä½¿ç”¨ç»Ÿè®¡ |
| **ç”¨æˆ·ç•™å­˜ç‡** | > 60% (30å¤©) | ä½¿ç”¨ç»Ÿè®¡ |
| **ç”¨æˆ·æ¨èç‡** | > 70% | ç”¨æˆ·è°ƒç ” |

---

## ğŸš¦ é£é™©ä¸åº”å¯¹

### æŠ€æœ¯é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | åº”å¯¹æªæ–½ |
|------|------|------|---------|
| **æ€§èƒ½é—®é¢˜** | é«˜ | ä¸­ | æå‰æ€§èƒ½æµ‹è¯•ï¼Œä¼˜åŒ–å…³é”®è·¯å¾„ |
| **å…¼å®¹æ€§é—®é¢˜** | ä¸­ | ä¸­ | å¤šå¹³å°æµ‹è¯•ï¼Œæä¾›å…¼å®¹æ€§æ–¹æ¡ˆ |
| **ç¬¬ä¸‰æ–¹ä¾èµ–å˜æ›´** | ä¸­ | ä½ | ç‰ˆæœ¬é”å®šï¼Œå®šæœŸæ›´æ–°æµ‹è¯• |
| **å®‰å…¨æ¼æ´** | é«˜ | ä½ | å®‰å…¨å®¡è®¡ï¼ŒåŠæ—¶ä¿®å¤ |

### é¡¹ç›®é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | åº”å¯¹æªæ–½ |
|------|------|------|---------|
| **éœ€æ±‚å˜æ›´** | ä¸­ | é«˜ | çµæ´»çš„è¿­ä»£è®¡åˆ’ï¼Œä¼˜å…ˆçº§ç®¡ç† |
| **èµ„æºä¸è¶³** | é«˜ | ä¸­ | åˆç†æ’æœŸï¼ŒåŠæ—¶è°ƒæ•´ |
| **å»¶æœŸäº¤ä»˜** | ä¸­ | ä¸­ | é‡Œç¨‹ç¢‘ç®¡ç†ï¼Œé£é™©é¢„è­¦ |

### ç”¨æˆ·é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | åº”å¯¹æªæ–½ |
|------|------|------|---------|
| **ç”¨æˆ·ä¸æ¥å—** | é«˜ | ä¸­ | ç”¨æˆ·è°ƒç ”ï¼Œå¿«é€Ÿåé¦ˆ |
| **å­¦ä¹ æˆæœ¬é«˜** | ä¸­ | ä¸­ | å®Œå–„æ–‡æ¡£ï¼Œæä¾›æ•™ç¨‹ |
| **åŠŸèƒ½ä¸æ»¡è¶³éœ€æ±‚** | é«˜ | ä½ | éœ€æ±‚åˆ†æï¼Œçµæ´»æ¶æ„ |

---

## ğŸ“ åç»­æ”¯æŒä¸ç»´æŠ¤

### ç»´æŠ¤è®¡åˆ’

1. **Bug ä¿®å¤**
   - 24å°æ—¶å†…å“åº”ä¸¥é‡ Bug
   - 7å¤©å†…ä¿®å¤ä¸€èˆ¬ Bug
   - å®šæœŸå‘å¸ƒè¡¥ä¸ç‰ˆæœ¬

2. **åŠŸèƒ½è¿­ä»£**
   - æ¯æœˆå‘å¸ƒå°ç‰ˆæœ¬æ›´æ–°
   - æ¯å­£åº¦å‘å¸ƒå¤§ç‰ˆæœ¬æ›´æ–°
   - æŒç»­æ”¶é›†ç”¨æˆ·åé¦ˆ

3. **æ€§èƒ½ä¼˜åŒ–**
   - å®šæœŸæ€§èƒ½è¯„ä¼°
   - æŒç»­ä¼˜åŒ–å…³é”®è·¯å¾„
   - ç›‘æ§æ€§èƒ½æŒ‡æ ‡

4. **å®‰å…¨æ›´æ–°**
   - åŠæ—¶ä¿®å¤å®‰å…¨æ¼æ´
   - å®šæœŸå®‰å…¨å®¡è®¡
   - å®‰å…¨å…¬å‘Šå‘å¸ƒ

### ç¤¾åŒºå»ºè®¾

1. **ç”¨æˆ·ç¤¾åŒº**
   - Discord æœåŠ¡å™¨
   - GitHub Discussions
   - ç”¨æˆ·åé¦ˆæ¸ é“

2. **å¼€å‘è€…ç¤¾åŒº**
   - è´¡çŒ®æŒ‡å—
   - ä»£ç è§„èŒƒ
   - Pull Request æµç¨‹

3. **æ–‡æ¡£ç»´æŠ¤**
   - å®šæœŸæ›´æ–°æ–‡æ¡£
   - ç”¨æˆ·æ¡ˆä¾‹åˆ†äº«
   - æœ€ä½³å®è·µåˆ†äº«

---

## ğŸ“ é™„å½•

### A. æœ¯è¯­è¡¨

| æœ¯è¯­ | è¯´æ˜ |
|------|------|
| **Agent** | AI æ™ºèƒ½ä½“ï¼Œè´Ÿè´£ç‰¹å®šé˜¶æ®µçš„ä»»åŠ¡ |
| **Session** | ä¼šè¯ï¼Œä¸€ä¸ªç‹¬ç«‹çš„å¼€å‘å‘¨æœŸ |
| **Artifact** | å·¥ä»¶ï¼ŒAI ç”Ÿæˆçš„æ–‡æ¡£å’Œä»£ç  |
| **HITL** | Human-in-the-Loopï¼Œäººæœºåä½œ |
| **Pipeline** | ç®¡é“ï¼Œå®Œæ•´çš„å¼€å‘æµç¨‹ |
| **EventBus** | äº‹ä»¶æ€»çº¿ï¼Œç”¨äºäº‹ä»¶é€šä¿¡ |

### B. å‚è€ƒèµ„æ–™

- [GUI_ARCHITECTURE_PLAN.md](./GUI_ARCHITECTURE_PLAN.md) - GUI æ¶æ„è§„åˆ’
- [GUI_ENHANCEMENT_PLAN.md](./GUI_ENHANCEMENT_PLAN.md) - GUI å¢å¼ºæ–¹æ¡ˆ
- [README_zh.md](./README_zh.md) - é¡¹ç›® README
- [litho.docs/](./litho.docs/) - å®Œæ•´é¡¹ç›®æ–‡æ¡£

### C. è”ç³»æ–¹å¼

- **é¡¹ç›®ä¸»é¡µ**: https://github.com/sopaco/cowork-forge
- **Issues**: https://github.com/sopaco/cowork-forge/issues
- **Discussions**: https://github.com/sopaco/cowork-forge/discussions

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2026-02-02  
**ç»´æŠ¤è€…**: Cowork Forge Team