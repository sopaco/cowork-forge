# 系统边界接口文档

本文档描述系统的外部调用接口，包括CLI命令、API端点、配置参数和其他边界机制。

## 命令行界面 (CLI)

### cowork

**描述**: AI驱动的软件开发系统 - 迭代架构

**源文件**: `crates/cowork-cli/src/main.rs`

**参数**:

- `config` (字符串): 可选 - 配置文件路径 (默认: config.toml) (默认值: `config.toml`)
- `verbose` (布尔值): 可选 - 启用详细日志记录 (默认值: `false`)

**选项**:

- `iter`(对象): 必需 - 创建并执行新迭代
- `list`(对象): 必需 - 列出所有迭代
- `show`(对象): 必需 - 显示迭代详情
- `continue`(对象): 必需 - 继续暂停的迭代
- `init`(对象): 必需 - 初始化新项目
- `status`(对象): 必需 - 显示项目状态
- `delete`(对象): 必需 - 删除迭代

**使用示例**:

```bash
cowork iter "我的第一个项目"
```

```bash
cowork list --all
```

```bash
cowork show 123e4567-e89b-12d3-a456-426614174000
```

```bash
cowork continue
```

```bash
cowork init --name "我的应用"
```

```bash
cowork status
```

```bash
cowork delete 123e4567-e89b-12d3-a456-426614174000
```

## 集成建议

### CLI

通过在自动化脚本中调用cowork命令与CI/CD流水线集成

**示例代码**:

```
# 在GitHub Actions工作流中
- name: 初始化项目
  run: cowork init --name "my-app"
- name: 创建第一个迭代
  run: cowork iter "实现登录功能"
- name: 检查项目状态
  run: cowork status
```

**最佳实践**:

- 对敏感配置使用环境变量 (例如, LLM_API_KEY)
- 在运行迭代前验证项目状态
- 处理退出代码，在迭代失败时使CI作业失败
- 在CI环境中使用--verbose标志进行调试

### GUI

与外部编辑器集成以进行人机循环编辑

**示例代码**:

```
// 在Tauri命令中，在外部编辑器中打开文件
tauri::api::process::Command::new_sidecar("code")
    .args(["/path/to/artifacts/idea.md"])
    .spawn()
    .expect("无法打开编辑器");
```

**最佳实践**:

- 使用tauri-plugin-opener进行跨平台文件打开
- 确保文件路径被正确转义