# System Boundary Interface Documentation

This document describes the system's external invocation interfaces, including CLI commands, API endpoints, configuration parameters, and other boundary mechanisms.

## Command Line Interface (CLI)

### cowork iter

**Description**: Create and execute a new iteration. Supports both genesis (new) and evolution (based on previous iteration) types. Evolution mode requires --base parameter and uses inheritance mode to determine knowledge transfer strategy.

**Source File**: `crates/cowork-cli/src/main.rs`

**Arguments**:

- `title` (String): required - Iteration title (required)
- `description` (Option<String>): optional - Detailed description of the iteration
- `base` (Option<String>): optional - Base iteration ID to inherit from (for evolution iterations)
- `inherit` (String): optional - Inheritance mode: none, full, or partial (default: `full`)

**Options**:

- `config, c`(String): optional - Path to config file (default: config.toml)
- `verbose, v`(bool): optional - Enable verbose logging (debug level) (default: `false`)

**Usage Examples**:

```bash
cowork iter "Implement user authentication"
```

```bash
cowork iter "Add payment gateway" --base ITER-123 --inherit partial
```

```bash
cowork iter "Fix bug #42" --description "Resolve null pointer exception" --inherit none
```

### cowork list

**Description**: List all iterations with optional filtering. Displays status, current stage, and iteration IDs. Active iterations shown by default; use --all to include completed.

**Source File**: `crates/cowork-cli/src/main.rs`

**Arguments**:

- `all` (bool): optional - Show all iterations including completed ones

**Options**:

- `config, c`(String): optional - Path to config file
- `verbose, v`(bool): optional - Enable verbose logging (default: `false`)

**Usage Examples**:

```bash
cowork list
```

```bash
cowork list --all
```

### cowork show

**Description**: Display detailed iteration information including status, timestamps, base iteration, inheritance mode, stage progress, and artifact completion status.

**Source File**: `crates/cowork-cli/src/main.rs`

**Arguments**:

- `iteration_id` (Option<String>): optional - Iteration ID (defaults to current iteration if not specified)

**Options**:

- `config, c`(String): optional - Path to config file
- `verbose, v`(bool): optional - Enable verbose logging (default: `false`)

**Usage Examples**:

```bash
cowork show ITER-abc123
```

```bash
cowork show
```

### cowork continue

**Description**: Resume execution of a paused iteration. Automatic pause occurs on errors or HITL (Human-in-the-Loop) requests requiring user input.

**Source File**: `crates/cowork-cli/src/main.rs`

**Arguments**:

- `iteration_id` (Option<String>): optional - Iteration ID (defaults to first paused iteration if not specified)

**Options**:

- `config, c`(String): optional - Path to config file
- `verbose, v`(bool): optional - Enable verbose logging (default: `false`)

**Usage Examples**:

```bash
cowork continue
```

```bash
cowork continue ITER-abc123
```

### cowork init

**Description**: Initialize a new project in the current directory. Creates .cowork-v2 directory structure with project metadata and iterations folder. Must be run before creating iterations.

**Source File**: `crates/cowork-cli/src/main.rs`

**Arguments**:

- `name` (Option<String>): optional - Project name (defaults to current directory name)

**Options**:

- `config, c`(String): optional - Path to config file
- `verbose, v`(bool): optional - Enable verbose logging (default: `false`)

**Usage Examples**:

```bash
cowork init
```

```bash
cowork init --name my-awesome-project
```

### cowork status

**Description**: Show project status including creation date, current iteration, and statistics (completed, running, paused, failed iteration counts).

**Source File**: `crates/cowork-cli/src/main.rs`

**Options**:

- `config, c`(String): optional - Path to config file
- `verbose, v`(bool): optional - Enable verbose logging (default: `false`)

**Usage Examples**:

```bash
cowork status
```

### cowork delete

**Description**: Delete an iteration by ID. Shows iteration details and requires 'y' confirmation before removal. Updates project metadata to remove iteration from list.

**Source File**: `crates/cowork-cli/src/main.rs`

**Arguments**:

- `iteration_id` (String): required - Iteration ID to delete

**Options**:

- `config, c`(String): optional - Path to config file
- `verbose, v`(bool): optional - Enable verbose logging (default: `false`)

**Usage Examples**:

```bash
cowork delete ITER-abc123
```

### cowork regenerate-knowledge

**Description**: Regenerate knowledge for a completed iteration. Re-analyzes artifacts (idea, PRD, design, plan) and creates updated knowledge entries for project memory. Only works on completed iterations.

**Source File**: `crates/cowork-cli/src/main.rs`

**Arguments**:

- `iteration_id` (String): required - Iteration ID

**Options**:

- `config, c`(String): optional - Path to config file
- `verbose, v`(bool): optional - Enable verbose logging (default: `false`)

**Usage Examples**:

```bash
cowork regenerate-knowledge ITER-abc123
```

## API Interfaces

### POST Configured via api_base_url in config.toml or LLM_API_BASE_URL env var

**Description**: OpenAI-compatible LLM API endpoint configuration. Used by the system to generate code, documentation, and architectural designs. Supports custom base URLs for compatibility with various LLM providers (OpenAI, Azure, local instances). Implements automatic rate limiting with maximum 1 concurrent request and 2-second delays to stay under 30 calls/minute quota.

**Source File**: `crates/cowork-core/src/llm/config.rs`

**Request Format**: JSON (OpenAI chat completion format, handled internally by adk-rust client)

**Response Format**: JSON (OpenAI completion format)

**Authentication**: API key via config.toml or environment variables (LLM_API_KEY)

### RPC Command tauri://localhost (internal IPC)

**Description**: RPC interface between React frontend and Rust backend in the Tauri desktop application. Provides access to project lifecycle management, iteration execution, file operations, and real-time event streaming. Commands are exposed via tauri::Command and invoked from JavaScript using @tauri-apps/api/core.

**Source File**: `crates/cowork-gui/src-tauri/src/lib.rs`

**Request Format**: JSON (serialized via Tauri's invoke system)

**Response Format**: JSON (Result<T, String> pattern)

**Authentication**: None (Tauri IPC)

## Router Routes

### projects

**Description**: Main projects dashboard showing registered projects list with search and filter capabilities. Displays project metadata, last opened timestamps, and quick actions.

**Source File**: `crates/cowork-gui/src/App.jsx`

### iterations

**Description**: Iterations list view for the current project. Shows all iterations with status indicators, stage progress, and inheritance relationships. Supports selecting individual iterations for chat/artifact viewing.

**Source File**: `crates/cowork-gui/src/App.jsx`

**Parameters**:

- `project_id` (String): Project context (implicit from active workspace)
### chat

**Description**: Chat interface for the selected iteration. Displays agent messages, user inputs, tool calls, and thinking processes. Supports real-time streaming and artifact confirmation workflows.

**Source File**: `crates/cowork-gui/src/App.jsx`

**Parameters**:

- `iteration_id` (String): Iteration ID for context
### artifacts

**Description**: Artifact viewer displaying generated documentation (idea.md, prd.md, design.md, plan.md) in rendered markdown format. Supports tabbed navigation between artifact types.

**Source File**: `crates/cowork-gui/src/App.jsx`

**Parameters**:

- `iteration_id` (String): Iteration ID
- `active_tab` (String): Active tab (idea/requirements/design/plan)
### code

**Description**: Code editor interface showing generated source files for the current iteration. Displays file tree structure and Monaco-based editor for syntax-highlighted code viewing and editing.

**Source File**: `crates/cowork-gui/src/App.jsx`

**Parameters**:

- `iteration_id` (String): Iteration ID
- `current_file` (String): Currently selected file path
### run

**Description**: Runner panel for executing and monitoring the generated application. Provides controls to start/stop development server, view runtime logs, and open live preview in browser.

**Source File**: `crates/cowork-gui/src/App.jsx`

**Parameters**:

- `iteration_id` (String): Iteration ID
### execution-memory

**Description**: Memory panel showing session-specific memories collected during iteration execution. Includes insights, decisions, and contextual information with full-text search capabilities.

**Source File**: `crates/cowork-gui/src/App.jsx`

**Parameters**:

- `session_id` (String): Session/Iteration ID
### project-knowledge

**Description**: Knowledge panel displaying project-wide accumulated knowledge across all iterations. Includes PRD summaries, design decisions, and technical constraints organized by iteration.

**Source File**: `crates/cowork-gui/src/App.jsx`

**Parameters**:

- `project_id` (String): Project ID
## Integration Suggestions

### CLI Automation

CLI Integration for Automation Pipelines and CI/CD. The cowork CLI can be integrated into automated build pipelines to generate boilerplate code, documentation, and initial project structures based on natural language descriptions.

**Example Code**:

```
# Shell script integration example
#!/bin/bash
set -e

export LLM_API_KEY="${LLM_API_KEY}"
export LLM_MODEL_NAME="gpt-4"

cd /workspace

# Initialize project if not exists
if [ ! -d ".cowork-v2" ]; then
    cowork init --name $(basename $(pwd))
fi

# Create and execute iteration from requirements
cowork iter "Implement OAuth2 authentication" \
    --description "Add Google and GitHub OAuth providers with JWT token management" \
    --inherit full

# Check status for CI/CD validation
if cowork status | grep -q "Failed"; then
    echo "Iteration failed"
    exit 1
fi
```

**Best Practices**:

- Use 'inherit partial' for bug fixes and small enhancements to preserve relevant context while avoiding contamination
- Always run 'cowork init' before first iteration to establish proper .cowork-v2 directory structure
- Use verbose flag (-v) during initial setup to diagnose LLM configuration issues
- Set LLM_API_KEY and LLM_MODEL_NAME environment variables for containerized deployments
- Create iterations with descriptive titles matching feature names for better knowledge indexing
- Use 'cowork continue' rather than creating new iterations when resuming paused work

### LLM Configuration

LLM Provider Configuration Integration. Configure Cowork Forge to work with various OpenAI-compatible LLM providers including OpenAI, Azure OpenAI, local models via LocalAI/Ollama, or custom endpoints.

**Example Code**:

```
# config.toml
[llm]
api_base_url = "https://api.openai.com/v1"
api_key = "${LLM_API_KEY}"  # Use env var substitution
model_name = "gpt-4"

# Or for local development with Ollama:
# api_base_url = "http://localhost:11434/v1"
# model_name = "codellama"

# Environment setup
export LLM_API_KEY="sk-your-key-here"
export LLM_API_BASE_URL="https://api.openai.com/v1"
export LLM_MODEL_NAME="gpt-4"
```

**Best Practices**:

- Store config.toml in version control with API base URL but exclude API keys (use environment variables)
- Use environment variables for sensitive credentials in production deployments
- Configure rate limiting explicitly for shared LLM endpoints to avoid quota exhaustion
- Use local LLM endpoints (e.g., LocalAI, Ollama) for air-gapped environments by setting api_base_url
- Monitor API usage through verbose logging to optimize token consumption

### Frontend Development

Tauri GUI Frontend Integration. JavaScript/TypeScript integration for building custom frontend interfaces using the Tauri-based GUI architecture. Uses invoke for commands and listen for backend events.

**Example Code**:

```
import { invoke } from '@tauri-apps/api/core';
import { listen } from '@tauri-apps/api/event';

// Initialize project and workspace
async function initializeProject(workspacePath) {
  await invoke('set_workspace', { workspace_path: workspacePath });
  
  // Register event listeners
  await listen('agent_event', (event) => {
    const { content, agent_name, message_type } = event.payload;
    updateChatUI(content, agent_name, message_type);
  });
  
  await listen('input_request', (event) => {
    const [requestId, prompt, options] = event.payload;
    showInputModal(requestId, prompt, options);
  });
}

// Create and execute iteration
async function createIteration(title, description) {
  const request = {
    title,
    description,
    base_iteration_id: null,
    inheritance: 'none'
  };
  
  const iteration = await invoke('gui_create_iteration', { request });
  await invoke('gui_execute_iteration', { iterationId: iteration.id });
  return iteration;
}
```

**Best Practices**:

- Use --workspace parameter when opening projects from project manager to isolate contexts
- Implement event listeners for 'iteration_completed' and 'iteration_failed' to trigger UI refresh
- Handle input_request events with timeout considerations (3000s default)
- Use project_loaded event to reset UI state when switching projects
- Implement proper cleanup for Tauri event listeners to prevent memory leaks

### Development Workflow

Evolution Iteration Pattern Integration. Implement evolutionary development workflows where each iteration builds upon previous work with controlled knowledge inheritance. Critical for maintaining project continuity and avoiding context loss.

**Example Code**:

```
// Evolution workflow example
// 1. Genesis iteration for initial foundation
const genesis = await invoke('gui_create_iteration', {
  request: {
    title: "Initial API Foundation",
    description: "Set up Express server with basic routing and middleware",
    base_iteration_id: null,
    inheritance: "none"
  }
});

// 2. Evolution iteration inheriting full context
const evolution = await invoke('gui_create_iteration', {
  request: {
    title: "Add User Authentication",
    description: "Implement JWT-based auth middleware",
    base_iteration_id: genesis.id,
    inheritance: "full"
  }
});

// 3. Partial inheritance for isolated feature
const feature = await invoke('gui_create_iteration', {
  request: {
    title: "Email Notification Service",
    description: "Add SendGrid integration (isolated from auth)",
    base_iteration_id: evolution.id,
    inheritance: "partial"
  }
});
```

**Best Practices**:

- Use 'none' inheritance for experimental spikes and completely new features
- Use 'full' inheritance for consistent architectural patterns across iterations
- Implement feedback loops using HITL (Human-in-the-Loop) at coding stage for code review
- Leverage knowledge regeneration after major architectural changes to update project memory
- Combine iterations with descriptive naming conventions for semantic version alignment


---

**Analysis Confidence**: 8.5/10
