# System Boundary Interface Documentation

This document describes the system's external invocation interfaces, including CLI commands, API endpoints, configuration parameters, and other boundary mechanisms.

## Command Line Interface (CLI)

### cowork new

**Description**: Start a new project by providing a project idea or description

**Source File**: `crates/cowork-cli/src/main.rs`

**Arguments**:

- `idea` (string): required - Project idea/description

**Options**:

- `config, c`(string): optional - Path to config file (default: config.toml)
- `verbose, v`(boolean): optional - Enable verbose logging
- `stream, s`(boolean): optional - Enable LLM streaming output (shows AI thinking process in real-time)

**Usage Examples**:

```bash
cowork new "Build a task management app with user authentication"
```

```bash
cowork new "Create a weather dashboard" --config ./my-config.toml --verbose
```

```bash
cowork new "Develop a simple blog" --stream
```

### cowork resume

**Description**: Resume an existing project from the latest successful session or a specified base session

**Source File**: `crates/cowork-cli/src/main.rs`

**Arguments**:

- `base` (string): optional - Resume from a specific session ID (optional). If omitted, defaults to latest successful session; if none, tries latest in-progress session.

**Options**:

- `config, c`(string): optional - Path to config file (default: config.toml)
- `verbose, v`(boolean): optional - Enable verbose logging
- `stream, s`(boolean): optional - Enable LLM streaming output (shows AI thinking process in real-time)

**Usage Examples**:

```bash
cowork resume
```

```bash
cowork resume --base session-1678901234
```

```bash
cowork resume -c ./alt-config.toml --stream
```

### cowork revert

**Description**: Revert the project and restart from a specific stage (prd, design, plan, coding, check, delivery)

**Source File**: `crates/cowork-cli/src/main.rs`

**Arguments**:

- `from` (string): required - Stage to restart from (prd, design, plan, coding, check, delivery) or 'auto' to use the last session's requested restart stage

**Options**:

- `config, c`(string): optional - Path to config file (default: config.toml)
- `verbose, v`(boolean): optional - Enable verbose logging
- `stream, s`(boolean): optional - Enable LLM streaming output (shows AI thinking process in real-time)

**Usage Examples**:

```bash
cowork revert --from coding
```

```bash
cowork revert --from auto
```

```bash
cowork revert -c ./config.toml --verbose
```

### cowork modify

**Description**: Modify an existing project with incremental changes based on a new idea or requirement

**Source File**: `crates/cowork-cli/src/main.rs`

**Arguments**:

- `idea` (string): required - Change idea/description specifying the incremental changes to apply

**Options**:

- `base, b`(string): optional - Base session ID to modify from (defaults to latest successful session)
- `config, c`(string): optional - Path to config file (default: config.toml)
- `verbose, v`(boolean): optional - Enable verbose logging
- `stream, s`(boolean): optional - Enable LLM streaming output (shows AI thinking process in real-time)

**Usage Examples**:

```bash
cowork modify "Add user profile page with avatar upload"
```

```bash
cowork modify "Improve login flow with 2FA" --base session-1678901234 --stream
```

```bash
cowork modify "Refactor API endpoints" -c ./config.toml
```

### cowork status

**Description**: Show the current project status, including session history and artifact progress

**Source File**: `crates/cowork-cli/src/main.rs`

**Arguments**:

- `sessions` (boolean): optional - Show all sessions instead of just the latest successful one

**Options**:

- `config, c`(string): optional - Path to config file (default: config.toml)
- `verbose, v`(boolean): optional - Enable verbose logging

**Usage Examples**:

```bash
cowork status
```

```bash
cowork status --sessions
```

```bash
cowork status -v
```

### cowork init

**Description**: Initialize a default configuration file (config.toml) with placeholders for API credentials

**Source File**: `crates/cowork-cli/src/main.rs`

**Usage Examples**:

```bash
cowork init
```

## Integration Suggestions

### CLI Integration

Integrate Cowork Forge into existing development workflows by wrapping its CLI commands in shell scripts or Makefiles to automate common project initiation and modification patterns.

**Example Code**:

```
# Example: Create a shell script to initialize and start a new project
#!/bin/bash
echo "Initializing new project..."
cowork init
cowork new "Build a REST API for user management" --stream --verbose

# Example: Use in Makefile
.PHONY: new-project
new-project:
	cowork init
	cowork new "My new app" --stream
```

**Best Practices**:

- Use --stream flag during development to observe AI reasoning
- Always verify config.toml credentials before running commands
- Store session IDs from successful runs for future resume/revert operations
- Use --verbose for debugging pipeline failures
- Combine with git to track changes between sessions

### LLM Configuration

Configure Cowork Forge to work with any OpenAI-compatible API endpoint by updating config.toml or setting environment variables, enabling integration with local LLMs like Ollama or self-hosted models.

**Example Code**:

```
# config.toml example for local Ollama
[llm]
api_base_url = "http://localhost:11434/v1"
api_key = "no-key-needed"
model_name = "llama3"

# Environment variable alternative
export LLM_API_BASE_URL="http://localhost:11434/v1"
export LLM_API_KEY=""
export LLM_MODEL_NAME="llama3"

cowork new "Build a simple chatbot"
```

**Best Practices**:

- Use environment variables in CI/CD pipelines for security
- Validate API endpoint connectivity before project creation
- Set model_name to lightweight models (e.g., llama3, mistral) for faster iteration
- Test with curl first to ensure endpoint compatibility
- Use rate-limited client to avoid overwhelming local LLM servers

### Session Artifact Access

Access and integrate generated artifacts (PRD, design, code) from the .cowork/sessions/ directory for use in external tools like code editors, version control, or documentation systems.

**Example Code**:

```
# Example: Extract latest design document and open in VS Code
LATEST_SESSION=$(ls -t .cowork/sessions/ | head -1)
cat .cowork/sessions/$LATEST_SESSION/artifacts/design.md | code -

# Example: Commit generated artifacts to git
#!/bin/bash
LATEST_SESSION=$(ls -t .cowork/sessions/ | head -1)
git add .cowork/sessions/$LATEST_SESSION/artifacts/
git commit -m "Auto-commit AI-generated artifacts from session $LATEST_SESSION"
```

**Best Practices**:

- Add .cowork/ to .gitignore to avoid committing session state
- Export artifacts to external directories for integration with CI/CD
- Use session metadata to correlate changes with version control commits
- Automate artifact extraction in post-commit hooks
- Back up .cowork directory as part of project backup strategy

### Human-in-the-Loop (HITL) Integration

Enhance HITL feedback by integrating with text editors (vim, code) to allow direct editing of AI-generated artifacts during review stages.

**Example Code**:

```
# Example: Configure vim as default editor for HITL feedback
export EDITOR=vim

# Example: Automate HITL feedback in CI
# Run cowork in non-interactive mode and inject feedback via file
LATEST_SESSION=$(ls -t .cowork/sessions/ | head -1)
echo "# Edited by CI\nAdd missing error handling" > .cowork/sessions/$LATEST_SESSION/hitl/feedback.md
cowork resume --base $LATEST_SESSION --stream
```

**Best Practices**:

- Set EDITOR environment variable to preferred editor
- Use automated feedback files for CI/CD pipelines
- Validate feedback format before injection
- Avoid overwriting user edits in interactive mode
- Log HITL feedback for audit trails


---

**Analysis Confidence**: 9.5/10
